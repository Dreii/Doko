(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},105:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(30),i=a.n(r),s=(a(67),a(5)),c=a(6),l=a(8),m=a(7),u=a(9),d=(a(68),a(13)),h=a.n(d),p=a(22),g=a(14),f=(a(70),a(10)),v=a(20),E=(a(71),function(e){var t=e.id,a=e.className,n=e.name,r=e.value,i=e.type,s=e.placeholder,c=e.onChange,l=(e.color,e.onBlur),m=e.style,u=e.disabled;return o.a.createElement("input",{id:t,className:"TextInput ".concat(a),name:n,placeholder:s,type:i||"",onChange:c,value:r,onBlur:l,style:m,disabled:u})}),w=(a(72),a(12),function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"26.728",height:"20.613",viewBox:"0 0 26.728 20.613"},o.a.createElement("path",{id:"check-icon","data-name":"Path 24",d:"M137.715-105.083l8.652,8.712L161.443-113.3",transform:"translate(-136.215 114.796)",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3"}))}),b=a(21),S=a.n(b),y=function(e){var t=e.noBack,a=e.primary,n=e.profile,r=e.icon,i=e.svgIcon,s=e.iconAlt,c=e.value,l=e.onClick,m=e.alt,u=e.style,d=e.className,h=e.id,p=e.loading,g=e.success,f=e.disabled;return o.a.createElement("button",{id:h,className:"button ".concat(d," ").concat(r?"icon":""," ").concat(n?"profile":""," ").concat(c?"value":""," ").concat(a?"primary":""," ").concat(t?"no-back":""," ").concat(g?"success":""),onClick:l,alt:m||"button",disabled:p||g||f,style:u},p?o.a.createElement(S.a,{type:"spin",color:a?"white":"#707070",height:32,width:32}):g?o.a.createElement(w,{color:"white"}):o.a.createElement("div",{className:"button-inner"},r?o.a.createElement("img",{className:"button-icon",src:r,alt:s||"button icon"}):null,i,c?o.a.createElement("span",null,c):null))},R=function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23"},o.a.createElement("g",{id:"add-icon","data-name":"Group 37",transform:"translate(-29 -21)"},o.a.createElement("line",{id:"Line_4","data-name":"Line 4",x2:"20",transform:"translate(30.5 32.5)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"}),o.a.createElement("line",{id:"Line_16","data-name":"Line 16",x2:"20",transform:"translate(40.5 22.5) rotate(90)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"})))},N=function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"23",height:"21",viewBox:"0 0 23 21"},o.a.createElement("g",{id:"rooms-icon","data-name":"Group 42",transform:"translate(-29 -22)"},o.a.createElement("line",{id:"Line_3","data-name":"Line 3",x2:"14",transform:"translate(36.5 23.5)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"}),o.a.createElement("line",{id:"Line_4","data-name":"Line 4",x2:"20",transform:"translate(30.5 32.5)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"}),o.a.createElement("line",{id:"Line_5","data-name":"Line 5",x2:"7",transform:"translate(43.5 41.5)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"})))},k=function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"28.758",height:"28.758",viewBox:"0 0 28.758 28.758"},o.a.createElement("g",{id:"magnifying_glass","data-name":"magnifying glass",transform:"translate(124.758 -186.992)"},o.a.createElement("line",{id:"Line_2","data-name":"Line 2",x2:"4.789",y2:"4.539",transform:"translate(-103.5 208.5)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"}),o.a.createElement("g",{id:"Ellipse_31","data-name":"Ellipse 31",transform:"translate(-124.758 201.371) rotate(-45)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"},o.a.createElement("circle",{cx:"10.168",cy:"10.168",r:"10.168",stroke:"none"}),o.a.createElement("circle",{cx:"10.168",cy:"10.168",r:"8.668",fill:"none"}))))},C=function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"26.109",height:"25.231",viewBox:"0 0 26.109 25.231"},o.a.createElement("g",{id:"back-icon",transform:"translate(-26.702 -33.747)"},o.a.createElement("line",{id:"Line_11","data-name":"Line 11",x2:"22.488",transform:"translate(28.823 46.363)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"}),o.a.createElement("line",{id:"Line_12","data-name":"Line 12",y1:"10.494",x2:"10.494",transform:"translate(28.823 35.869)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"}),o.a.createElement("line",{id:"Line_13","data-name":"Line 13",x2:"10.494",y2:"10.494",transform:"translate(28.823 46.363)",fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:"3"})))},O=a(121),L=(a(25),function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"29",height:"29",viewBox:"0 0 29 29"},o.a.createElement("g",{id:"location-icon",transform:"translate(-324.5 -627.5)"},o.a.createElement("g",{id:"Ellipse_33","data-name":"Ellipse 33",transform:"translate(324.5 627.5)",fill:"none",stroke:t,strokeWidth:"3"},o.a.createElement("circle",{cx:"14.5",cy:"14.5",r:"14.5",stroke:"none"}),o.a.createElement("circle",{cx:"14.5",cy:"14.5",r:"13",fill:"none"})),o.a.createElement("g",{id:"Ellipse_34","data-name":"Ellipse 34",transform:"translate(332.5 635.5)",fill:t,stroke:t,strokeWidth:"3"},o.a.createElement("circle",{cx:"6.5",cy:"6.5",r:"6.5",stroke:"none"}),o.a.createElement("circle",{cx:"6.5",cy:"6.5",r:"5",fill:"none"}))))}),P=function(e){var t=e.title,a=e.onTitleChange,n=e.onSubmit,r=e.loading,i=e.success;return o.a.createElement("div",{className:"add-page home-ui-page"},o.a.createElement("h1",{className:"home-ui-title"},"Create Room"),o.a.createElement("label",{className:"home-ui-label",htmlFor:"add-page-title"},"Title"),o.a.createElement(E,{id:"add-page-title",className:"home-ui-input",value:t,onChange:a,placeholder:"eg: Great food Here!"}),o.a.createElement(y,{primary:!0,svgIcon:o.a.createElement(L,{color:"white"}),value:"Place Room",loading:r,success:i,onClick:n}))},j=function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"19.255",height:"20.325",viewBox:"0 0 19.255 20.325"},o.a.createElement("g",{id:"tack",transform:"translate(0 0)"},o.a.createElement("g",{id:"Group_74","data-name":"Group 74",transform:"translate(0 0)"},o.a.createElement("g",{id:"Group_73","data-name":"Group 73"},o.a.createElement("path",{id:"Path_14","data-name":"Path 14",d:"M174.976,181.924v-4.84h1.07a1.07,1.07,0,0,0,1.07-1.07v-4.279a1.07,1.07,0,0,0-1.07-1.07H163.209a1.07,1.07,0,0,0-1.07,1.07v4.279a1.07,1.07,0,0,0,1.07,1.07h1.07v4.84a9.661,9.661,0,0,0-4.279,8,1.07,1.07,0,0,0,1.07,1.07h17.115a1.07,1.07,0,0,0,1.07-1.07A9.661,9.661,0,0,0,174.976,181.924Zm-12.758,6.926a7.525,7.525,0,0,1,3.666-5.409,1.07,1.07,0,0,0,.535-.925v-6.5a1.07,1.07,0,0,0-1.07-1.07h-1.07V172.8h10.7v2.139h-1.07a1.07,1.07,0,0,0-1.07,1.07v6.5a1.07,1.07,0,0,0,.535.925,7.526,7.526,0,0,1,3.666,5.409h-14.82Z",transform:"translate(-160 -170.665)",fill:t}))),o.a.createElement("rect",{id:"Rectangle_59","data-name":"Rectangle 59",width:"5.415",height:"2.106",rx:"1.053",transform:"translate(3.443 4.246)",fill:t})))},_=(a(73),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.img,a=e.color,n=e.size,r=e.style,i=e.className;return o.a.createElement("div",{className:"profile-img ".concat(i," ").concat(a),style:Object(f.a)({},r,{backgroundImage:"url(".concat(t,")"),width:n,height:n})})}}]),t}(o.a.PureComponent)),I=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.createdRooms,a=e.pinnedRooms,n=e.OpenRoom,r=e.PinRoom,i=e.DeleteRoom;return o.a.createElement("div",{className:"rooms-page home-ui-page"},o.a.createElement("h1",{className:"home-ui-title"},"Pinned Rooms"),o.a.createElement("div",{className:"created-rooms-container"},a.length?a.map(function(e,t){return o.a.createElement(x,{room:e,message:e.messages[0],OpenRoom:n,PinRoom:r,key:t})}):o.a.createElement("div",{className:"no-data-container"},o.a.createElement(k,{color:"#707070"}),o.a.createElement("p",null,"No rooms pinned!"))),o.a.createElement("h2",{className:"home-ui-title"},"Created Rooms"),o.a.createElement("div",{className:"subscribed-rooms-container"},t.length?t.map(function(e,t){return o.a.createElement(x,{room:e,message:e.messages[0],OpenRoom:n,DeleteRoom:i,key:t,created:!0})}):o.a.createElement("div",{className:"no-data-container"},o.a.createElement(k,{color:"#707070"}),o.a.createElement("p",null,"No rooms created!"))))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={deleteFormOpen:!1},a.onClick=function(){a.props.OpenRoom(a.props.room)},a.onDeleteFormOpen=function(e){e.stopPropagation(),a.setState({deleteFormOpen:!0})},a.onDeleteFormClose=function(e){e.stopPropagation(),a.setState({deleteFormOpen:!1})},a.onDeleteRoom=function(e){e.stopPropagation(),a.props.DeleteRoom(a.props.room._id)},a.onUnPin=function(e){e.stopPropagation(),a.props.PinRoom(a.props.room._id)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.room,a=e.created,n=e.message,r=this.state.deleteFormOpen;return o.a.createElement("div",{className:"chat-listing ".concat(t.ownedByUser?"owner":t.creator.color),onClick:this.onClick},o.a.createElement("h1",null,t.name),!a&&o.a.createElement(y,{className:"subscription-button pinned",svgIcon:o.a.createElement(j,null),noBack:!0,onClick:this.onUnPin}),a&&!r&&o.a.createElement(y,{className:"delete-button",noBack:!0,value:"Delete",onClick:this.onDeleteFormOpen}),a&&r&&o.a.createElement("div",{className:"delete-form"},o.a.createElement("p",null,"Are you Sure?"),o.a.createElement(y,{value:"Yes",className:"delete-form-button",onClick:this.onDeleteRoom}),o.a.createElement(y,{value:"Nevermind",primary:!0,className:"delete-form-button",onClick:this.onDeleteFormClose})),n&&o.a.createElement("div",{className:"last-message"},o.a.createElement(_,{img:n.sender.image,size:23}),o.a.createElement("p",null,n.message)))}}]),t}(o.a.PureComponent),T=function(e){var t=e.place,a=e.onPlaceChange,n=e.rooms,r=e.onRoomsChange,i=e.onSubmit,s=e.loading,c=e.success;return o.a.createElement("div",{className:"search-page home-ui-page"},o.a.createElement("h1",{className:"home-ui-title"},"Search"),o.a.createElement("label",{className:"home-ui-label",htmlFor:"search-page-place"},"Find a Place."),o.a.createElement(E,{id:"search-page-place",className:"home-ui-input",value:t,onChange:a,placeholder:"eg: Austin, Japan or 96813"}),o.a.createElement("label",{className:"home-ui-label",htmlFor:"search-page-rooms"},"Find a Room."),o.a.createElement(E,{id:"search-page-rooms",className:"home-ui-input",value:n,onChange:r,placeholder:"eg: Food, Music, or Beers"}),o.a.createElement(y,{primary:!0,svgIcon:o.a.createElement(k,{color:"white"}),value:"Begin Search",loading:s,success:c,onClick:i}))},H=function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"26.025",height:"27.919",viewBox:"0 0 26.025 27.919"},o.a.createElement("g",{id:"Group_96","data-name":"Group 96",transform:"translate(1 1)"},o.a.createElement("path",{id:"Path_7","data-name":"Path 7",d:"M28.792,24.434h-6.76A3.332,3.332,0,0,1,18.7,21.106V4.813a3.332,3.332,0,0,1,3.328-3.328H28.9A.743.743,0,1,0,28.9,0h-6.87a4.818,4.818,0,0,0-4.813,4.813V21.106a4.818,4.818,0,0,0,4.813,4.813h6.76a.743.743,0,1,0,0-1.485Z",transform:"translate(-17.219)",fill:"none",stroke:t,strokeWidth:"2"}),o.a.createElement("path",{id:"Path_8","data-name":"Path 8",d:"M138.644,141.263l-4.72-4.72a.743.743,0,0,0-1.051,1.051l3.454,3.454H121.262a.743.743,0,1,0,0,1.485h15.066l-3.454,3.454a.745.745,0,0,0,.523,1.271.725.725,0,0,0,.523-.22l4.72-4.72A.742.742,0,0,0,138.644,141.263Z",transform:"translate(-114.837 -128.826)",fill:"none",stroke:t,strokeWidth:"2"})))},F=(a(74),"undefined"!==typeof Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}()),M=F&&"undefined"!==typeof Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),D="undefined"!==typeof HTMLCanvasElement&&HTMLCanvasElement.prototype.toBlob,A=D||"undefined"!==typeof Uint8Array&&"undefined"!==typeof ArrayBuffer&&"undefined"!==typeof atob,U="undefined"!==typeof FileReader||"undefined"!==typeof URL,B=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"process",value:function(e,t){var a=this;return new Promise(function(n,o){["image/png","image/jpeg"].every(function(t){return e.type!==t})&&o("File type not supported"),e.size>15e4&&o("Image too large"),a.resize(e,t,function(e,t){n(e)})})}},{key:"resize",value:function(t,a,n){if("function"===typeof a&&(n=a,a={width:120,height:120}),!e.isSupported()||!t.type.match(/image.*/))return n(t,!1),!1;if(t.type.match(/image\/gif/))return n(t,!1),!1;var o=document.createElement("img");return o.onload=function(r){var i=o.width,s=o.height,c=!1;if(i>=s&&i>a.width?(s*=a.width/i,i=a.width,c=!0):s>a.height&&(i*=a.height/s,s=a.height,c=!0),c){var l=document.createElement("canvas");if(l.width=i,l.height=s,l.getContext("2d").drawImage(o,0,0,i,s),D)l.toBlob(function(e){n(e,!0)},t.type);else{var m=e._toBlob(l,t.type);n(m,!0)}}else n(t,!1)},e._loadImage(o,t),!0}},{key:"_toBlob",value:function(e,t){var a,n=e.toDataURL(t).split(",");a=n[0].indexOf("base64")>=0?atob(n[1]):decodeURIComponent(n[1]);for(var o=new ArrayBuffer(a.length),r=new Uint8Array(o),i=0;i<a.length;i+=1)r[i]=a.charCodeAt(i);var s=n[0].split(":")[1].split(";")[0],c=null;if(F)c=new Blob([M?r:o],{type:s});else{var l=new Blob;l.append(o),c=l.getBlob(s)}return c}},{key:"_loadImage",value:function(e,t,a){if("undefined"===typeof URL){var n=new FileReader;n.onload=function(t){e.src=t.target.result,a&&a()},n.readAsDataURL(t)}else e.src=URL.createObjectURL(t),a&&a()}},{key:"isSupported",value:function(){return"undefined"!==typeof HTMLCanvasElement&&A&&U}}]),e}(),G=function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"36.41",height:"32.769",viewBox:"0 0 36.41 32.769"},o.a.createElement("path",{id:"camera-icon",d:"M14.744,3A3.662,3.662,0,0,0,11.1,6.641V8.462H5.641A3.662,3.662,0,0,0,2,12.1V32.128a3.662,3.662,0,0,0,3.641,3.641H34.769a3.662,3.662,0,0,0,3.641-3.641V12.1a3.662,3.662,0,0,0-3.641-3.641H29.308V6.641A3.662,3.662,0,0,0,25.667,3Zm0,3.641H25.667V8.462A3.662,3.662,0,0,0,29.308,12.1h5.462V32.128H5.641V12.1H11.1a3.662,3.662,0,0,0,3.641-3.641Zm5.462,7.282a7.282,7.282,0,1,0,7.282,7.282A7.31,7.31,0,0,0,20.205,13.923Zm10.923,0a1.821,1.821,0,1,0,1.821,1.821A1.821,1.821,0,0,0,31.128,13.923ZM20.205,17.564a3.641,3.641,0,1,1-3.641,3.641A3.614,3.614,0,0,1,20.205,17.564Z",transform:"translate(-2 -3)",fill:t}))},V=a(52),z=a.n(V),W="https://api.dokomap.io:3001",Z=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"SendPost",value:function(e,t){var a=Object(f.a)({},this.postData,{body:JSON.stringify(t)});return this.handleResponse(fetch(W+"/"+e,a))}},{key:"SendSecure",value:function(e,t,a){var n=Object(f.a)({},this.postData,{body:JSON.stringify(a)});return n.headers.auth=e,this.handleResponse(fetch(W+"/"+t,n))}},{key:"UploadImage",value:function(e,t){var a=Object(f.a)({},this.postFormData);return a.headers.auth=e,a.body=t,this.handleResponse(fetch(W+"/image-upload",a))}},{key:"RequestRooms",value:function(e,t,a,n,o,r){return new Promise(function(i,s){e.emit("CLIENT_SEARCHING_AREA",t,a,n,o,r),e.on("SERVER_SENDING_ROOM_DATA",function(e){i(e)}),e.on("SERVER_ERROR_GETTING_ROOM_DATA",function(e){console.error(e),s(e)})})}},{key:"handleResponse",value:function(e){return e.then(function(e){if(500===e.status)throw Error("Server Error please try again");return e.json()}).then(function(e){if(e.error)throw Error(e.error);return e})}}]),e}();Z.ConnectSocket=function(e){return new Promise(function(t,a){var n=z()("https://api.dokomap.io:3231",{rejectUnauthorized:!1});n.on("connect",function(){n.emit("USER_CONNECTED",e._id),t(n)}),n.on("error",function(e){a(e)})})},Z.postData={method:"POST",headers:{accept:"application/json","Content-type":"application/json"}},Z.postFormData={method:"POST",headers:{}},Z.subscriptions=[];var X=Z,K=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={uploading:!1,image:null},a.UploadImage=function(e){a.setState({image:null,uploading:!0});var t=e.target.files[0];B.process(t,{width:158,height:158}).then(function(e){var t=new FormData;return t.append("file",e),t}).then(function(e){return X.UploadImage(a.props.auth,e)}).then(function(e){a.SetImage(e.url).then(function(){return a.props.onSuccess(e)})}).catch(function(e){a.setState({image:null,uploading:!1}),a.props.onError(e.toString())})},a.SetImage=function(e){return new Promise(function(t,n){a.setState({uploading:!0});var o=new Image;o.src=e,o.onload=function(){a.setState({image:a.props.image,uploading:!1}),t(o)},o.onError=function(e){return n(e)}})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props&&this.props.image&&this.SetImage(this.props.image)}},{key:"componentDidUpdate",value:function(e){this.props.image&&this.props.image!==e.image&&this.SetImage(this.props.image)}},{key:"render",value:function(){var e=this,t=this.state,a=t.uploading,n=t.image;return o.a.createElement("div",{id:this.props.id,className:"image-upload"},o.a.createElement("div",{className:"image-upload-image",style:{backgroundImage:null!==n?"url('".concat(n,"')"):"none"}},a?o.a.createElement(S.a,{type:"spin",color:"#0984E3"}):o.a.createElement("div",{className:"image-upload-button ".concat(!n&&"no-image")},o.a.createElement("label",{htmlFor:"image-upload-input"},o.a.createElement(G,{color:"#707070"})),o.a.createElement("input",{type:"file",id:"image-upload-input",onChange:function(t){return e.UploadImage(t)}}))))}}]),t}(n.Component),Q=function(e){var t=e.auth,a=e.user,n=(e.image,e.onImageChange),r=e.email,i=e.onEmailChange,s=e.password,c=e.onPasswordChange,l=e.passwordConfirm,m=e.onPasswordConfirmChange,u=e.firstName,d=e.onFirstNameChange,h=e.lastName,p=e.onLastNameChange,g=e.onSubmit,f=e.onLogout,v=e.HandleError,w=e.loading,b=e.success;return o.a.createElement("div",{className:"settings-page home-ui-page"},o.a.createElement("h1",{className:"home-ui-title"},"User Settings"),o.a.createElement("label",{className:"home-ui-label",htmlFor:"settings-page-image-upload"},"Change Profile Image."),o.a.createElement(K,{id:"settings-page-image-upload",auth:t,image:a.image,endpoint:"/user-image-upload",onSuccess:function(e){return n(e.url)},onError:function(e){return v(e,2)}}),o.a.createElement("label",{className:"home-ui-label",htmlFor:"settings-page-email"},"Change Email."),o.a.createElement(E,{id:"settings-page-email",className:"home-ui-input",type:"email",autocomplete:"email",value:r,onChange:i,placeholder:a.email}),o.a.createElement("label",{className:"home-ui-label",htmlFor:"settings-page-password"},"Change Password"),o.a.createElement(E,{id:"settings-page-password",type:"password",className:"home-ui-input",value:s,onChange:c,placeholder:"***"}),o.a.createElement(E,{id:"settings-page-password-confirm",type:"password",className:"home-ui-input",value:l,onChange:m,placeholder:"***"}),o.a.createElement("label",{className:"home-ui-label",htmlFor:"settings-page-first-name"},"Change Name"),o.a.createElement(E,{id:"settings-page-first-name",className:"home-ui-input",value:u,onChange:d,placeholder:a.name.split(" ")[0]}),o.a.createElement(E,{id:"settings-page-last-name",className:"home-ui-input",value:h,onChange:p,placeholder:a.name.split(" ")[1]}),o.a.createElement(y,{primary:!0,value:"Update profile",onClick:g,loading:w,success:b}),o.a.createElement(y,{noBack:!0,svgIcon:o.a.createElement(H,{color:"#bcbcbc"}),value:"Log Out",style:{color:"#bcbcbc"},onClick:f}))};a(100);var q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={page:"add",addRoomTitle:"",searchLocation:"",searchRooms:"",showingDynamicRoomSearch:!1,changeImage:"",changeEmail:"",changePassword:"",changePasswordConfirm:"",changeFirstName:"",changeLastName:"",formTarget:"",formLoading:!1,formSuccess:!1},a.SwitchPage=function(e){return a.setState({page:e})},a.ChangeField=function(e,t){return a.setState(Object(v.a)({},t,e))},a.SetSuccess=function(){a.setState({formLoading:!1,formSuccess:!0}),window.clearTimeout(a.successTimer),a.successTimer=window.setTimeout(function(){return a.setState({formSuccess:!1})},1e3)},a.GetButtonX=function(e){if(a.props.hide)return-70;if(!a.props.open)return 16;if(a.props.windowWidth>750){var t=.3*a.props.windowWidth;return e*(t/3)+t+28}return e*((a.props.windowWidth-116)/3)+32},a.HandleEnterPressed=function(e){if(a.props.open&&"Enter"===e.key){var t=a.state,n=t.page;t.formLoading||("add"===n&&a.AddRoom(),"search"===n&&a.HandleSearch(),"settings"===n&&a.ProfileUpdate())}},a.BeginPlacingRoom=function(){if(""===a.state.addRoomTitle)return a.props.HandleError("Rooms need a title",0);a.props.BeginPlacingRoom(a.state.addRoomTitle),a.setState({addRoomTitle:""})},a.ValidateForm=function(e){var t=this.state,a=t.changeEmail,n=t.changePassword,o=t.changePasswordConfirm,r=t.changeFirstName,i=t.changeLastName;return"profile-edit"===e&&0===a.length&&0===n.length&&0===r.length&&0===i.length?this.props.HandleError("Nothing to update",0):"profile-edit"===e&&a.length&&null===a.match(/^\S+@\S+[.][0-9a-z]+$/)?this.props.HandleError("Invalid email",0):"profile-edit"===e&&n.length&&n.length<4?this.props.HandleError("Password too short",0):"profile-edit"===e&&n.length&&null===n.match(/([0-9].*[a-zA-Z])|([a-zA-Z].*[0-9])/)?this.props.HandleError("Password requires at least one letter and one number",0):"profile-edit"!==e||!n.length||n===o||this.props.HandleError("Passwords dont match",0)}.bind(Object(g.a)(a)),a.ProfileUpdate=function(){var e=this,t=this.state,a=t.changeEmail,n=t.changePassword,o=t.changeFirstName,r=t.changeLastName;if(this.ValidateForm("profile-edit")){this.setState({formLoading:!0,formTarget:"user-update"});var i=Object(f.a)({},this.props.user);a&&(i.email=a),n&&(i.password=n),o&&(i.firstName=o),r&&(i.lastName=r);var s=i.name.split(" ");o&&r?i.name=o+" "+r:o?i.name=o+" "+s[1]:r&&(i.name=s[0]+" "+r),this.setState({changeEmail:"",changePassword:"",changePasswordConfirm:"",changeFirstName:"",changeLastName:""}),X.SendPost("user-update",{auth:this.props.auth,user:i}).then(function(t){e.SetSuccess(),e.props.SetAuth(t.token,t.user)}).catch(function(t){e.props.HandleError(t.toString(),2),e.setState({loading:!1})})}}.bind(Object(g.a)(a)),a.HandleSearch=function(){var e=this,t=this.state,a=t.searchLocation,n=t.searchRooms,o=t.page;this.props.FilterRooms(this.state.searchRooms),a.length>0?(this.setState({formLoading:!0,formTarget:"search",searchLocation:""}),X.SendSecure(this.props.auth,"search-location",{query:a}).then(function(t){if("OK"===t.status){e.SetSuccess();var a=t.results[0].geometry.location;e.props.MoveMap({latitude:a.lat,longitude:a.lng}),e.props.SetMenuOpen(!1)}else"NO_RESULTS"===t.status?e.props.HandleError("no results",0):e.props.HandleError("error searching",3),e.setState({formLoading:!1})})):("search"===o&&""!==n&&this.setState({showingDynamicRoomSearch:!0}),this.props.SetMenuOpen(!1))}.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.HandleEnterPressed)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.HandleEnterPressed)}},{key:"render",value:function(){var e=this,t=this.props,a=t.auth,n=t.user,r=t.SetAuth,i=t.hide,s=t.Logout,c=t.open,l=t.SetMenuOpen,m=t.pinnedRooms,u=t.createdRooms,d=t.OpenRoom,h=t.PinRoom,p=t.DeleteRoom,g=this.state,v=g.page,w=g.addRoomTitle,b=g.searchLocation,S=g.searchRooms,L=g.changeImage,j=g.changeEmail,_=g.changePassword,x=g.changePasswordConfirm,H=g.changeFirstName,F=g.changeLastName,M=g.formSuccess,D=g.showingDynamicRoomSearch,A=g.formLoading;g.formTarget;return o.a.createElement("div",{className:"home-ui"},o.a.createElement("div",{id:"menu",className:c?"open":void 0},o.a.createElement("div",{className:"menu-items"},o.a.createElement("div",{className:"menu-buttons"},o.a.createElement(y,{id:"home-button",className:"home-ui-button ".concat("add"===v&&"active"),svgIcon:o.a.createElement(R,{color:"add"===v?"white":"#707070"}),primary:"add"===v,onClick:function(){return c?e.SwitchPage("add"):l(!0)},style:{left:this.GetButtonX(0)}}),o.a.createElement(y,{id:"rooms-button",className:"home-ui-button ".concat("rooms"===v&&"active"),svgIcon:o.a.createElement(N,{color:"rooms"===v?"white":"#707070"}),primary:"rooms"===v,onClick:function(){return c?e.SwitchPage("rooms"):l(!0)},style:{left:this.GetButtonX(1)}}),o.a.createElement(y,{id:"search-button",className:"home-ui-button ".concat("search"===v&&"active"),svgIcon:o.a.createElement(k,{color:"search"===v?"white":"#707070"}),primary:"search"===v,onClick:function(){return c?e.SwitchPage("search"):l(!0)},style:{left:this.GetButtonX(2)}}),o.a.createElement(y,{id:"settings-button",className:"home-ui-button ".concat("settings"===v&&"active"),icon:n.image,primary:"settings"===v,onClick:function(){return c?e.SwitchPage("settings"):l(!0)},style:{left:this.GetButtonX(3)}}),o.a.createElement(E,{className:"dynamic-room-search ".concat(D&&!i?"show":""),disabled:!D,value:S,onChange:function(t){e.setState({searchRooms:t.target.value}),e.props.FilterRooms(t.target.value)},onBlur:function(){return 0===S.length?e.setState({showingDynamicRoomSearch:!1}):null},style:{left:this.GetButtonX(2)}})),o.a.createElement("div",{className:"menu-page"},o.a.createElement("div",{className:"background-gradient"}),o.a.createElement(y,{className:"home-ui-back-button",svgIcon:o.a.createElement(C,{color:"#707070"}),onClick:function(){"search"===v&&""!==S&&e.setState({showingDynamicRoomSearch:!0}),l(!1)}}),o.a.createElement(O.a,{in:c&&"add"===v,timeout:0,unmountOnExit:!0,classNames:"home-ui-page"},o.a.createElement(P,{title:w,onTitleChange:function(t){return e.ChangeField(t.target.value,"addRoomTitle")},onSubmit:this.BeginPlacingRoom,loading:A,success:M})),o.a.createElement(O.a,{in:c&&"rooms"===v,timeout:0,unmountOnExit:!0,classNames:"home-ui-page"},o.a.createElement(I,{createdRooms:u,pinnedRooms:m,OpenRoom:d,PinRoom:h,DeleteRoom:p})),o.a.createElement(O.a,{in:c&&"search"===v,timeout:0,unmountOnExit:!0,classNames:"home-ui-page"},o.a.createElement(T,{place:b,onPlaceChange:function(t){return e.ChangeField(t.target.value,"searchLocation")},rooms:S,onRoomsChange:function(t){return e.ChangeField(t.target.value,"searchRooms")},onSubmit:this.HandleSearch,loading:A,success:M})),o.a.createElement(O.a,{in:c&&"settings"===v,timeout:0,unmountOnExit:!0,classNames:"home-ui-page"},o.a.createElement(Q,{user:n,auth:a,image:L,onImageChange:function(e){return r(a,Object(f.a)({},n,{image:e}))},email:j,onEmailChange:function(t){return e.ChangeField(t.target.value,"changeEmail")},password:_,onPasswordChange:function(t){return e.ChangeField(t.target.value,"changePassword")},passwordConfirm:x,onPasswordConfirmChange:function(t){return e.ChangeField(t.target.value,"changePasswordConfirm")},firstName:H,onFirstNameChange:function(t){return e.ChangeField(t.target.value,"changeFirstName")},lastName:F,onLastNameChange:function(t){return e.ChangeField(t.target.value,"changeLastName")},onSubmit:this.ProfileUpdate,onLogout:s,loading:A,success:M}))))))}}]),t}(n.Component),J=(a(105),a(23)),Y=a(59),$=(a(107),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).onClick=function(){var e=a.props,t=e.room,n=e.OpenRoom,o=e.SelectRoom;t.selected?n(t):o(t._id)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.chatNumber,a=e.selected,n=e.room;return o.a.createElement("div",{className:"point ".concat(n.ownedByUser?"owner":n.creator.color," ").concat(a?"selected":""),onClick:this.onClick,"data-selected":n.selected,"data-room":n},o.a.createElement("div",{className:"point-background"}),o.a.createElement("span",{className:"chat-number"},t<100?t:"100+"))}}]),t}(o.a.PureComponent)),ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={viewport:{width:"100%",height:"100%",latitude:null,longitude:null,zoom:12},oldViewport:null,mapLoaded:!1,mapInstance:null,pulse:!1},a.onMapReady=function(){a.props.onMapReady(),a.setState({mapLoaded:!0,oldViewport:Object(f.a)({},a.state.viewport)})},a.MoveMap=function(e){a.setState({viewport:Object(f.a)({},a.state.viewport,{longitude:e.longitude,latitude:e.latitude,transitionDuration:500,transitionInterpolator:new J.a,transitionEasing:Y.a})})},a.SetViewport=function(e){return a.setState({viewport:e})},a.SearchMap=function(){if(!a.props.placingRoom&&null!==a.state.viewport&&null!==!a.state.viewport.latitude){var e=a.state,t=e.viewport,n=e.oldViewport,o=e.mapInstance,r=o.project([t.longitude,t.latitude]),i=o.project([n.longitude,n.latitude]),s=Math.abs(r.x-i.x)/t.zoom,c=Math.abs(r.y-i.y)/t.zoom;(s>10||c>10)&&(a.props.SearchForNewRooms(a.props.socket,{latitude:a.state.viewport.latitude,longitude:a.state.viewport.longitude},a.state.viewport.zoom),a.setState({oldViewport:Object(f.a)({},a.state.viewport),pulse:!0}),setTimeout(function(){return a.setState({pulse:!1})},500))}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.mapRef&&this.setState({mapInstance:this.mapRef.getMap()})}},{key:"componentDidUpdate",value:function(e){var t=this.props.moveCoordinates;t&&t!==e.moveCoordinates&&this.MoveMap(t)}},{key:"ShowPointers",value:function(e,t,a,n){return e.map(function(e,t){return o.a.createElement(J.b,{key:e._id,latitude:e.location[1],longitude:e.location[0]},o.a.createElement($,{color:e.color,chatNumber:e.messages.length,selected:e.selected,room:e,OpenRoom:a,SelectRoom:n}))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.userPosition,n=t.moveCoordinates,r=t.selectedRoom,i=t.OpenRoom,s=t.SelectRoom,c=t.filteredRooms,l=t.hide,m=t.placingRoom,u=t.CreateRoomUI;return o.a.createElement("div",{className:"Map ".concat(l?"hide":""," ").concat(this.state.mapLoaded&&"ready")},o.a.createElement(J.c,Object.assign({},this.state.viewport,{onViewportChange:this.SetViewport,mapStyle:"mapbox://styles/dreii/cjvfy7qvw0hxk1fpmvwojdakr",width:"100%",height:"100%",maxZoom:15,minZoom:10,onMouseUp:this.SearchMap,onTouchEnd:this.SearchMap,onTransitionEnd:this.SearchMap,latitude:this.state.viewport.latitude||n.latitude,longitude:this.state.viewport.longitude||n.longitude,onLoad:this.onMapReady,ref:function(t){return e.mapRef=t}}),!l&&c&&this.ShowPointers(c,r,i,s),a&&!l&&o.a.createElement(J.b,{latitude:a.latitude,longitude:a.longitude,offsetX:-8,offsetY:-8},o.a.createElement("div",{id:"location-indicator"})),a&&!l&&o.a.createElement(y,{svgIcon:o.a.createElement(L,{color:"#707070"}),id:"location-button",className:m||!c?"bottom":"",onClick:function(){return e.MoveMap(a)}}),this.state.pulse&&o.a.createElement(J.b,{latitude:this.state.oldViewport.latitude,longitude:this.state.oldViewport.longitude},o.a.createElement("div",{className:"new-search-marker"})),m&&u({latitude:this.state.viewport.latitude,longitude:this.state.viewport.longitude})))}}]),t}(n.Component),te=(a(51),function(e){e.color;var t=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(t),xmlns:"http://www.w3.org/2000/svg",width:"29.72",height:"20.897",viewBox:"0 0 29.72 20.897"},o.a.createElement("path",{id:"Path_25","data-name":"Path 25",d:"M29.313,80.341a1.161,1.161,0,0,0-1.262-.161L21.7,83.273,15.737,76.4a1.161,1.161,0,0,0-1.754,0L8.022,83.273,1.669,80.18A1.161,1.161,0,0,0,.05,81.562L4.462,96.074a1.161,1.161,0,0,0,1.111.823H24.148a1.161,1.161,0,0,0,1.111-.823L29.67,81.562A1.161,1.161,0,0,0,29.313,80.341ZM23.287,94.575H6.433L3.046,83.433l4.761,2.318a1.161,1.161,0,0,0,1.385-.283l5.668-6.535,5.668,6.535a1.161,1.161,0,0,0,1.385.283l4.761-2.318Z",transform:"translate(0 -76)"}))}),ae=function(e){var t=e.color,a=e.className;return o.a.createElement("svg",{className:"svg-icon ".concat(a),xmlns:"http://www.w3.org/2000/svg",width:"19.255",height:"27.913",viewBox:"0 0 19.255 27.913"},o.a.createElement("g",{id:"tack",transform:"translate(0 0)"},o.a.createElement("g",{id:"Group_74","data-name":"Group 74",transform:"translate(0 0)"},o.a.createElement("g",{id:"Group_73","data-name":"Group 73"},o.a.createElement("path",{id:"Path_14","data-name":"Path 14",d:"M174.976,181.924v-4.84h1.07a1.07,1.07,0,0,0,1.07-1.07v-4.279a1.07,1.07,0,0,0-1.07-1.07H163.209a1.07,1.07,0,0,0-1.07,1.07v4.279a1.07,1.07,0,0,0,1.07,1.07h1.07v4.84a9.661,9.661,0,0,0-4.279,8,1.07,1.07,0,0,0,1.07,1.07h17.116a1.07,1.07,0,0,0,1.07-1.07A9.661,9.661,0,0,0,174.976,181.924Zm-12.758,6.926a7.525,7.525,0,0,1,3.666-5.409,1.07,1.07,0,0,0,.535-.925v-6.5a1.07,1.07,0,0,0-1.07-1.07h-1.07V172.8h10.7v2.139h-1.07a1.07,1.07,0,0,0-1.07,1.07v6.5a1.07,1.07,0,0,0,.535.925,7.526,7.526,0,0,1,3.666,5.409h-14.82Z",transform:"translate(-160 -170.665)",fill:t}))),o.a.createElement("rect",{id:"Rectangle_59","data-name":"Rectangle 59",width:"5.415",height:"2.106",rx:"1.053",transform:"translate(3.443 4.246)",fill:t}),o.a.createElement("rect",{id:"Rectangle_60","data-name":"Rectangle 60",width:"2.106",height:"8.625",rx:"1.053",transform:"translate(8.558 19.288)",fill:t})))},ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).onClick=function(){return a.props.ChatClick(a.props.room,a.props.index)},a.onPin=function(e){e.stopPropagation(),a.props.PinRoom(a.props.room._id)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.room,a=e.membersCount,n=e.members,r=e.selected,i=e.pinned;return o.a.createElement("div",{className:"chat ".concat(t.ownedByUser?"owner":t.creator.color," ").concat(r?"active":""),onClick:this.onClick},o.a.createElement("h1",{className:"title"},t.name.length>22?t.name.substr(0,22)+"...":t.name),o.a.createElement(y,{className:"subscription-button ".concat(t.ownedByUser||i?"pinned":""),svgIcon:t.ownedByUser?o.a.createElement(te,null):i?o.a.createElement(j,null):o.a.createElement(ae,null),noBack:!0,onClick:t.ownedByUser?void 0:this.onPin}),o.a.createElement("div",{className:"chat-info"},t.distance&&o.a.createElement("p",{className:"distance"},~~t.distance>0?~~t.distance+"mi":"> 1mi"),o.a.createElement("div",{className:"member-list"},o.a.createElement(_,{img:t.creator.image,size:48,className:"creator-profile"}),a>3?o.a.createElement("div",{className:"member-count"},a<100?a-3:"100+"):null,n.map(function(e,t){return o.a.createElement(_,{key:t,className:"member-listing",img:e.image,size:48})}))))}}]),t}(o.a.PureComponent),oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).ChatClick=function(e,t){e.selected?a.props.OpenRoom(e):a.props.SelectRoom(e._id)},a.DisplayRooms=function(){var e=a.props,t=e.filteredRooms,n=e.PinRoom;if(t)return t.map(function(e,t){return o.a.createElement(ne,{room:e,selected:e.selected,pinned:e.pinned,index:t,members:e.members,membersCount:e.membersCount,ChatClick:a.ChatClick,PinRoom:n})})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.selectedRoomIndex;e.selectedRoomIndex!==t&&(this.chats.scrollLeft=372*t)}},{key:"render",value:function(){var e=this,t=this.props.hide;return o.a.createElement("div",{className:"chats ".concat(t?"hide":""),ref:function(t){return e.chats=t}},this.DisplayRooms())}}]),t}(n.Component),re=(a(108),function(e){e.user;var t=e.chatroom,a=e.CloseRoom,n=e.onPin;return o.a.createElement("div",{className:"chat-header"},o.a.createElement(y,{className:"subscription-button ".concat(t.ownedByUser||t.pinned?"pinned":""),svgIcon:t.ownedByUser?o.a.createElement(te,null):t.pinned?o.a.createElement(j,null):o.a.createElement(ae,null),noBack:!0,onClick:t.ownedByUser?void 0:n}),o.a.createElement("h1",{className:"chat-title"},t.name.length>50?"".concat(t.name.substr(0,50),"..."):t.name),o.a.createElement("div",{className:"chat-info"},o.a.createElement(y,{className:"chat-exit-button",icon:"/back-icon.svg",onClick:a}),o.a.createElement("p",{className:"distance"},~~t.distance>0?~~t.distance+"mi":"> 1mi"),o.a.createElement("div",{className:"member-list"},o.a.createElement(_,{img:t.creator.image,size:48,className:"creator-profile"}),t.membersCount>3?o.a.createElement("div",{className:"member-count"},t.membersCount<100?t.membersCount-3:"100+"):null,t.members.map(function(e,t){return o.a.createElement(_,{key:t,className:"member-listing",img:e.image,size:48})}))))}),ie=(a(109),function(e){var t=e.chatroom,a=e.messages,n=e.user;return o.a.createElement("div",{className:"chat-body"},a.length>0?a.map(function(e,a){return null!==e.sender&&e.sender._id===n._id?o.a.createElement(ce,{message:e,key:a}):o.a.createElement(se,{chatroom:t,message:e,key:a})}):o.a.createElement("p",{className:"no-messages"},"Nobody here but us chickens."),o.a.createElement("div",{className:"chat-body-spacer"}))});function se(e){var t=e.chatroom,a=e.message,n=a.sender&&a.sender._id===t.creator._id?t.color:a.color;return o.a.createElement("div",{className:"chat-message ".concat(n," ").concat(a.sender?"":"missing-user")},o.a.createElement(_,{className:"chat-message-sender",img:a.sender?a.sender.image:"/user-missing-icon.svg",size:28}),o.a.createElement("p",{className:"chat-message-text"},o.a.createElement("span",{className:"chat-message-name"},a.sender?a.sender.name:"Deleted User"),a.message))}function ce(e){var t=e.message;return o.a.createElement("div",{className:"chat-message user-sent"},o.a.createElement("p",{className:"chat-message-text"},o.a.createElement("span",{className:"chat-message-name"},"You"),t.message))}a(110);var le=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={value:"",rows:1,minRows:1,maxRows:5,shiftPressed:!1},a.handleChange=function(e){var t=a.props.fontSize,n=a.state,o=n.minRows,r=n.maxRows,i=e.target.rows;e.target.rows=o;var s=~~(e.target.scrollHeight/t)-1;s===i&&(e.target.rows=s),s>=r&&(e.target.rows=r,e.target.scrollTop=e.target.scrollHeight);var c=e.target.value;" "!==c&&"\n"!==c&&(a.props.SetValue(c),a.setState({rows:s<r?s:r}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.handleKeyUp=this.handleKeyUp.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleKeyDown",value:function(e){"Shift"===e.key&&this.setState({shiftPressed:!0})}},{key:"handleKeyUp",value:function(e){""!==this.props.value&&("Shift"===e.key&&this.setState({shiftPressed:!1}),"Enter"!==e.key||this.state.shiftPressed||""===this.props.value.trim()||(this.props.onSend(),this.setState({rows:this.state.minRows})))}},{key:"render",value:function(){var e=this.state.rows,t=this.props,a=t.className,n=t.fontSize,r=t.value;return o.a.createElement("textarea",{rows:e,value:r,placeholder:"Enter your text here...",className:"resizeable-text-area ".concat(a),onChange:this.handleChange,style:{fontSize:n,lineHeight:n+"px"}})}}]),t}(n.Component),me=(a(111),function(e){var t=e.value,a=e.SetValue,n=e.SendMessage;return o.a.createElement("div",{className:"chat-inputs"},o.a.createElement(le,{className:"chat-text-input",fontSize:24,value:t,SetValue:a,onSend:n}),o.a.createElement(y,{className:"chat-send-button",primary:!0,icon:"/send-icon.svg",disabled:0===t.length,onClick:n}))}),ue=(a(112),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).onPin=function(e){a.props.PinRoom(a.props.chatroom._id)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.socket,n=e.chatroom,r=e.value,i=e.SetValue,s=e.CloseRoom;return o.a.createElement("div",{className:"chat-room ".concat(n?"open":""," ").concat(n?n.ownedByUser?"owner":n.creator.color:"")},n?o.a.createElement("div",{className:"chat-room-container"},o.a.createElement(ie,{chatroom:n,messages:n.messages,user:t}),o.a.createElement(me,{value:r,SetValue:i,SendMessage:function(){return function(e,t,a,n,o){if(""!==a){var r=(new Date).toISOString();e.emit("CLIENT_SENDING_CHAT",n._id,t._id,t.creator.color,t.creator._id===n._id,a,r),o("")}}(a,n,r,t,i)}}),o.a.createElement("div",{className:"bottom-gradient"}),o.a.createElement(re,{user:t,chatroom:n,CloseRoom:s,onPin:this.onPin})):null)}}]),t}(n.Component));a(113),a(114);var de=function(){return o.a.createElement("div",{className:"cross-hair"},o.a.createElement("div",{className:"x-axis"}),o.a.createElement("div",{className:"y-axis"}),o.a.createElement("div",{className:"dot"}))},he=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={searchQuery:"",loading:!1},a.SendSearchQuery=function(){var e=a.props,t=e.auth,n=e.MoveMap,o=e.HandleError,r=a.state.searchQuery;a.setState({loading:!0}),""!==r?X.SendSecure(t,"search-location",{query:r}).then(function(e){if("OK"===e.status){var t=e.results[0].geometry.location;n({latitude:t.lat,longitude:t.lng})}else"NO_RESULTS"===e.status?o("no results",0):o("error searching",2);a.setState({loading:!1,searchQuery:""})}):(o("No location entered",1),a.setState({loading:!1}))},a.CreateRoom=function(){var e=a.props,t=e.socket,n=e.roomTitle,o=e.coords,r=e.userID,i=e.Close,s=e.HandleError;return a.setState({loading:!0}),t.emit("CLIENT_CREATING_ROOM",r,{name:n,coords:o}),new Promise(function(e,a){var n=window.setTimeout(function(){s("error creating room",2),i(),a()},3e4);t.on("ROOM_CREATED",function(t){window.clearTimeout(n),i(),e(t)})})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.Close,a=this.state,n=a.searchQuery,r=a.loading;return o.a.createElement("div",{id:"placing-room-container"},o.a.createElement(E,{id:"placing-room-location-search",placeholder:"Search for a location.",value:n,onChange:function(t){return e.setState({searchQuery:t.target.value})}}),o.a.createElement(y,{svgIcon:o.a.createElement(k,{color:"#707070"}),loading:r,id:"placing-room-location-search-button",onClick:function(t,a){return e.SendSearchQuery()}}),o.a.createElement("p",{id:"placing-room-text"},"Drag to place your room."),o.a.createElement(y,{svgIcon:o.a.createElement(C,{color:"#707070"}),id:"placing-room-back-button",onClick:t}),o.a.createElement(y,{id:"placing-room-button",primary:!0,svgIcon:o.a.createElement(w,{color:"white"}),loading:r,value:"Place",onClick:this.CreateRoom}),o.a.createElement(de,null))}}]),t}(n.Component),pe=(a(115),function(e){var t=e.error,a=e.level,n=e.show;return o.a.createElement("div",{className:"Error ".concat(n&&"show"," level-").concat(a)},o.a.createElement("p",null,"string"===typeof t||t instanceof String?t.length>36?t.substr(0,36)+"...":t:void 0===t?"Error":t.toString().substr(0,36)))});function ge(e,t){var a=""!==(e=e.toLowerCase())?t.filter(function(t){return t.name.toLowerCase().includes(e)||t.creator.name.toLowerCase().includes(e)}):t;return a.length>0?a:null}var fe=a(60);function ve(e,t,a,n){var o=.017453292519943295,r=Math.cos,i=.5-r((a-e)*o)/2+r(e*o)*r(a*o)*(1-r((n-t)*o))/2;return 12742*Math.asin(Math.sqrt(i))/1.609}function Ee(e,t,a,n){return a/(t-e)*(t*n)}function we(e){var t,a=this.state,n=a.rooms,o=a.searchString,r=a.userPosition,i=a.lastSearchedLocation;e.length>0?(r&&e.forEach(function(e){e.distance=ve(r.latitude,r.longitude,e.location[1],e.location[0])}),(t=n).push.apply(t,Object(fe.a)(e)),be(n,i),n=n.length>30?n.slice(30):n):be(n,i);this.SelectRoom(n[0]._id,{dontPan:!0});var s=""!==o?ge(o,n):n;this.setState({rooms:n,filteredRooms:s,lastDownloadTime:Date.now()})}function be(e,t){e.sort(function(e,a){return ve(t.latitude,t.longitude,e.location[1],e.location[0])-ve(t.latitude,t.longitude,a.location[1],a.location[0])})}function Se(e,t,a,n){e.messages.unshift(t),e.membersCount=n,e.members=a}function ye(){var e=this;return X.ConnectSocket(this.props.user).then(function(t){return t.on("SERVER_SENDING_ROOM_DATA",function(t){we.call(e,t)}),t.on("SERVER_SENDING_CREATED_ROOMS",function(t){e.setState({createdRooms:t})}),t.on("SERVER_SENDING_PINNED_ROOMS",function(t){e.setState({pinnedRooms:t})}),t.on("ROOM_CREATED",function(t){var a=e.state.createdRooms;t.ownedByUser=!0,a.push(t),e.setState({createdRooms:a,lastSearchedLocation:{latitude:t.location[1],longitude:t.location[0]}}),we.call(e,[t]),e.OpenRoom(t)}),t.on("ROOM_DELETED",function(t){var a=e.state,n=a.rooms,o=a.filteredRooms,r=a.createdRooms,i=a.pinnedRooms,s=a.openedRoom;s&&s._id===t&&(e.HandleError("Room closed by owner.",0),s=null),n=n.filter(function(e){return e._id!==t}),o=o.filter(function(e){return e._id!==t}),r=r.filter(function(e){return e._id!==t}),i=i.filter(function(e){return e._id!==t}),e.setState({rooms:n,filteredRooms:o,createdRooms:r,pinnedRooms:i,openedRoom:s})}),t.on("NEW_MESSAGE",function(t){(function(e){var t=this.state,a=t.rooms,n=t.pinnedRooms,o=t.createdRooms,r=e.message,i=e.members,s=e.membersCount,c=a.find(function(e){return e._id===r.room});c&&Se(c,r,i,s);var l=n.find(function(e){return e._id===r.room});!c&&l&&Se(l,r,i,s);var m=o.find(function(e){return e._id===r.room});!c&&m&&Se(m,r,i,s),this.setState({rooms:a,pinnedRooms:n,createdRooms:o})}).call(e,t)}),t})}function Re(){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(p.a)(h.a.mark(function e(){var t,a=this;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.call(this).then(function(e){return Ce.bind(a),e}).catch(function(e){return{latitude:30.2671537,longitude:-97.743057}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ke(){var e=this;return new Promise(function(t,a){if(!navigator||!navigator.geolocation)return e.HandleError("Unable to get location.",1),a();navigator.geolocation.getCurrentPosition(function(a){t(Oe.call(e,a.coords))},function(t){a(Le.call(e,t))})})}function Ce(){var e=this;return new Promise(function(t,a){navigator.geolocation.watchPosition(function(a){t(Oe.call(e,a.coords))},function(t){a(Le.call(e,t))})})}function Oe(e){return e={latitude:e.latitude,longitude:e.longitude},this.setState({userPosition:e}),e}function Le(e){switch(e.code){case 3:this.HandleError("Location timed out.",1);break;case 2:this.HandleError("Device can't get data.",1);break;case 1:this.HandleError("Location services denied.",1);break;default:this.HandleError("Unable to get location.",1)}return null}var Pe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={userPosition:null,moveCoordinates:null,dataReady:!1,menuOpen:!1,rooms:[],newRooms:!1,filteredRooms:[],createdRooms:[],pinnedRooms:[],messages:[],lastDownloadTime:null,selectedRoomIndex:0,selectedRoom:null,openedRoom:null,searchString:"",chatValue:"",error:"",errorLevel:0,errorShowing:!1,socket:null,placingRoom:!1,newRoomName:"",windowWidth:window.innerWidth},a.InitiateApp=Object(p.a)(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.call(Object(g.a)(a));case 2:return t=e.sent,a.MoveMap(t),e.next=6,ye.call(Object(g.a)(a));case 6:return n=e.sent,a.setState({socket:n}),e.next=10,a.GetUserSpecificRooms(n,a.props.user._id);case 10:return e.next=12,a.SearchForNewRooms(n,t,12);case 12:a.onDataReady();case 13:case"end":return e.stop()}},e)})),a.GetUserSpecificRooms=function(){var e=Object(p.a)(h.a.mark(function e(t,a){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.emit("CLIENT_REQUESTING_CREATED",a),t.emit("CLIENT_REQUESTING_SUBSCRIPTIONS",a);case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.SearchForNewRooms=function(){var e=Object(p.a)(h.a.mark(function e(t,n,o){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({lastSearchedLocation:n}),e.next=3,X.RequestRooms(t,a.props.user._id,n,o,a.state.rooms.map(function(e){return e._id}),a.state.lastDownloadTime).catch(function(e){return a.HandleError(e.message,2)});case 3:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.ResizeHandler=function(e){a.setState({windowX:window.innerWidth})},a.onMapReady=function(){return a.setState({mapReady:!0})},a.onDataReady=function(){return a.setState({dataReady:!0})},a.MoveMap=function(e){return a.setState({moveCoordinates:e})},a.Logout=function(){a.props.SetAuth(null)},a.ToggleMainMenu=function(e){return a.setState({menuOpen:e})},a.SetChatValue=function(e){return a.setState({chatValue:e})},a.BeginPlacingRoom=function(e){a.setState({placingRoom:!0,newRoomName:e,menuOpen:!1})},a.CancelPlacingRoom=function(){return a.setState({placingRoom:!1,newRoomName:""})},a.CreateRoomUI=function(e){return o.a.createElement(he,{auth:a.props.auth,userID:a.props.user._id,socket:a.state.socket,coords:e,roomTitle:a.state.newRoomName,MoveMap:a.MoveMap,HandleError:a.HandleError,Close:a.CancelPlacingRoom})},a.SelectRoom=function(e,t){var n=a.state,o=n.rooms,r=n.moveCoordinates,i=0;o.forEach(function(a,n){a._id===e?(a.selected=!0,i=n,t&&!0===t.dontPan||(r={latitude:a.location[1],longitude:a.location[0]})):a.selected=!1}),a.setState({selectedRoom:e,selectedRoomIndex:i,moveCoordinates:r})},a.OpenRoom=function(e){a.setState({openedRoom:e,menuOpen:!1})},a.CloseRoom=function(){return a.setState({openedRoom:null,chatValue:""})},a.FilterRooms=function(e){var t=ge(e,a.state.rooms);a.setState({filteredRooms:t}),null===t&&a.HandleError("no results",0)},a.PinRoom=function(e){var t=a.state,n=t.rooms,o=t.pinnedRooms,r=t.socket;n.map(function(t){return t._id===e&&(t.pinned=!t.pinned,r.emit("CLIENT_PINNING_ROOM",a.props.user._id,t._id,t.pinned),t.pinned?o.push(t):o.splice(o.findIndex(function(e){return e._id===t._id}),1)),t}),a.setState({rooms:n,pinnedRooms:o})},a.DeleteRoom=function(e){a.state.socket.emit("CLIENT_DELETING_ROOM",a.props.auth,e)},a.HandleError=function(e,t){return console.error("error",e),a.setState({error:e,errorShowing:!0,errorLevel:t}),window.clearTimeout(a.errorFadeTimer),a.errorFadeTimer=window.setTimeout(function(){return a.setState({errorShowing:!1})},1500),!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.ResizeHandler),this.InitiateApp()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.ResizeHandler)}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.auth,n=this.state,r=n.userPosition,i=n.menuOpen,s=n.filteredRooms,c=n.selectedRoomIndex,l=n.openedRoom,m=n.chatValue,u=n.placingRoom,d=n.error,h=n.errorLevel,p=n.errorShowing,g=n.dataReady,f=n.socket,v=n.moveCoordinates,E=n.pinnedRooms,w=n.createdRooms,b=n.mapReady,y=n.windowWidth;return o.a.createElement("div",{id:"home"},o.a.createElement(pe,{error:d,level:h,show:p}),!g&&!b&&o.a.createElement("div",{className:"loading-container"},o.a.createElement(S.a,{type:"spin",color:"#fff"})),o.a.createElement(q,{open:i,hide:u||null!==l||!g||!b,SetMenuOpen:this.ToggleMainMenu,windowWidth:y,auth:a,user:t,SetAuth:this.props.SetAuth,Logout:this.Logout,pinnedRooms:E,createdRooms:w,BeginPlacingRoom:this.BeginPlacingRoom,FilterRooms:this.FilterRooms,OpenRoom:this.OpenRoom,PinRoom:this.PinRoom,DeleteRoom:this.DeleteRoom,MoveMap:this.MoveMap,HandleError:this.HandleError}),o.a.createElement(oe,{hide:!s||u||i||!g||!b||null!==l,windowWidth:y,userID:t._id,filteredRooms:s,selectedRoomIndex:c,SelectRoom:this.SelectRoom,OpenRoom:this.OpenRoom,PinRoom:this.PinRoom}),o.a.createElement(ue,{chatroom:l,value:m,SetValue:this.SetChatValue,CloseRoom:this.CloseRoom,user:t,socket:f,PinRoom:this.PinRoom}),g&&o.a.createElement(ee,{hide:null!==l||i,onMapReady:this.onMapReady,socket:f,moveCoordinates:v,userPosition:r,filteredRooms:s,placingRoom:u,SelectRoom:this.SelectRoom,OpenRoom:this.OpenRoom,SearchForNewRooms:this.SearchForNewRooms,CreateRoomUI:this.CreateRoomUI}))}}]),t}(n.Component),je=(a(116),a(56)),_e=a.n(je),Ie=a(57),xe=a.n(Ie),Te=function(e){var t=e.email,a=e.password,n=e.ChangeField,r=e.HandleLogin,i=e.HandleFacebookLogin,s=e.HandleGoogleLogin,c=e.HandleError,l=e.ChangePage,m=e.loginLoading,u=e.fbLoginLoading,d=e.gLoginLoading,h=e.HandleFacebookClick,p=e.HandleGoogleClick;return o.a.createElement("div",{className:"login-container"},o.a.createElement("div",{className:"inner-container"},o.a.createElement(E,{value:t,placeholder:"Email",onChange:function(e){return n(e.target.value,"email")}}),o.a.createElement(E,{value:a,type:"password",placeholder:"Password",onChange:function(e){return n(e.target.value,"password")}}),o.a.createElement(y,{value:"Log In",primary:!0,loading:m,onClick:r}),o.a.createElement(_e.a,{appId:"463433601078938",fields:"name,email,picture.type(large)",callback:function(e){return i(e)},onClick:h,render:function(e){return o.a.createElement(y,{value:"Facebook Login",primary:!0,loading:u,icon:"/facebook-icon.svg",className:"facebook-login-button",onClick:e.onClick})}}),o.a.createElement(xe.a,{clientId:"499694391724-bdfsbp5kluvslv31d2fqiclnvt57pppt.apps.googleusercontent.com",onSuccess:function(e){return s(e)},onFailure:function(e){return c(e.error,2)},render:function(e){return o.a.createElement(y,{value:"Google Login",primary:!0,loading:d,icon:"/google-icon.svg",className:"google-login-button",onClick:function(t){p(),e.onClick(t)}})}}),o.a.createElement(y,{value:"Signup",noBack:!0,onClick:function(){return l("signup")}})))},He=function(e){var t=e.email,a=e.password,n=e.passwordConfirm,r=e.HandleSignup,i=e.ChangeField,s=e.ChangePage,c=e.loading,l=e.success;return o.a.createElement("div",{className:"signup-container"},o.a.createElement("div",{className:"inner-container"},o.a.createElement(E,{value:t,placeholder:"Email",onChange:function(e){return i(e.target.value,"email")}}),o.a.createElement(E,{value:a,type:"password",placeholder:"Password",onChange:function(e){return i(e.target.value,"password")}}),o.a.createElement(E,{value:n,type:"password",placeholder:"Password Confirm",onChange:function(e){return i(e.target.value,"passwordConfirm")}}),o.a.createElement(y,{value:"Sign Up",primary:!0,onClick:r,loading:c,success:l}),o.a.createElement(y,{value:"Log In",noBack:!0,onClick:function(){return s("login")}})))},Fe=function(e){var t=e.auth,a=e.image,n=e.SetImage,r=e.firstName,i=e.lastName,s=e.ChangeField,c=e.HandleProfileSubmit,l=e.HandleError,m=e.loading,u=e.success;return o.a.createElement("div",{className:"profile-container"},o.a.createElement("div",{className:"inner-container"},o.a.createElement(K,{auth:t,image:a,endpoint:"/user-image-upload",onSuccess:function(e){return n(e.url)},onError:function(e){return l(e)}}),o.a.createElement(E,{value:r,placeholder:"First Name",onChange:function(e){return s(e.target.value,"firstName")}}),o.a.createElement(E,{value:i,placeholder:"Last Name",onChange:function(e){return s(e.target.value,"lastName")}}),o.a.createElement(y,{value:"Create Profile",primary:!0,onClick:c,loading:m,success:u})))},Me=function(e){var t=e.parallaxX;return o.a.createElement("div",{className:"city-background-display"},o.a.createElement("div",{className:"sun"}),o.a.createElement("img",{src:"/city-2.svg",alt:"",className:"city city-2",style:{transform:"translateX(-".concat(Ee(0,960,t,.1),"px)")}}),o.a.createElement("img",{src:"/city-1.svg",alt:"",className:"city city-1",style:{transform:"translateX(-".concat(Ee(0,960,t,.25),"px)")}}),o.a.createElement("img",{src:"/city-0.svg",alt:"",className:"city city-0",style:{transform:"translateX(-".concat(Ee(0,960,t,.5),"px)")}}))},De=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={page:"login",email:"",password:"",passwordConfirm:"",firstName:"",lastName:"",image:"",error:"",errorShowing:!1,errorLevel:0,formTarget:"",formLoading:!1},a.HandleLogin=function(){a.ValidateForm()&&(a.SetLoading(!0,"login"),X.SendPost("login",{email:a.state.email,password:a.state.password}).then(function(e){a.props.SetAuth(e.token,e.user)}).catch(function(e){return a.SetError(e.message,2)}))},a.HandleFacebookLogin=function(e){if(!e||!e.accessToken)return a.SetError("Facebook authentication denied",1);var t={accessToken:e.accessToken,userID:e.userID,email:e.email,name:e.name,imageURL:e.picture.data.url};X.SendPost("fb-login",t).then(function(e){a.props.SetAuth(e.token,e.user)}).catch(function(e){return a.SetError(e.message,2)})},a.HandleGoogleLogin=function(e){if(!e.tokenId)return a.SetError("Google authentication denied",1);var t={accessToken:e.tokenId,userID:e.googleId,email:e.profileObj.email,name:e.profileObj.name,imageURL:e.profileObj.imageUrl};X.SendPost("google-login",t).then(function(e){a.props.SetAuth(e.token,e.user)}).catch(function(e){console.error(e),a.SetError(e.message,1)})},a.HandleSignup=function(){a.ValidateForm()&&(a.SetLoading(!0,"signup"),X.SendPost("signup",{email:a.state.email,password:a.state.password}).then(function(e){a.props.SetAuth(e.token,e.user),a.SetLoading(!1),a.ChangePage("profile")}).catch(function(e){return a.SetError(e.message,2)}))},a.HandleProfileSubmit=function(){a.ValidateForm()&&(a.SetLoading(!0,"update-profile"),X.SendPost("user-update",{auth:a.props.auth,user:{name:a.state.firstName+" "+a.state.lastName}}).then(function(e){a.props.SetAuth(e.auth,e.user)}).catch(function(e){return a.SetError(e.toString(),1)}))},a.SetError=function(e,t){return console.error(e),a.setState({error:e,errorShowing:!0,errorLevel:t,formLoading:!1}),window.clearTimeout(a.loadingTimer),window.clearTimeout(a.errorFadeTimer),a.errorFadeTimer=window.setTimeout(function(){return a.setState({errorShowing:!1})},1500),!1},a.ValidateForm=function(){var e=a.state,t=e.page,n=e.email,o=e.password,r=e.passwordConfirm,i=e.image,s=e.firstName,c=e.lastName;return("login"!==t||""!==n&&""!==o)&&("signup"!==t||""!==n&&""!==o&&""!==r)?"signup"===t&&null===n.match(/^\S+@\S+[.][0-9a-z]+$/)?a.SetError("Invalid email",0):"signup"===t&&o!==r?a.SetError("Passwords dont match",0):"signup"===t&&o.length<4?a.SetError("Password too short",0):"signup"===t&&null===o.match(/([0-9].*[a-zA-Z])|([a-zA-Z].*[0-9])/)?a.SetError("Password needs letters and numbers",0):"profile"!==t||""!==i&&""!==s&&""!==c||a.SetError("Fields cannot be blank",0):a.SetError("Fields cannot be blank",0)},a.ChangeField=function(e,t){return a.setState(Object(v.a)({},t,e))},a.ChangePage=function(e){return"login"===e||"signup"===e||"profile"===e?a.setState({page:e}):a.SetError("Invalid Page.",2)},a.GetPageXPos=function(e){return"login"===e?0:"signup"===e?100:200},a.SetLoading=function(e,t){e?(window.clearTimeout(a.loadingTimer),a.loadingTimer=window.setTimeout(function(){a.setState({formLoading:!1}),a.SetError("Server Timed out",2)},15e3)):window.clearTimeout(a.loadingTimer),a.setState({formLoading:e,formTarget:t})},a.HandleEnterPressed=function(e){if("Enter"===e.key){var t=a.state,n=t.page;t.formLoading||("login"===n&&a.HandleLogin(),"signup"===n&&a.HandleSignup(),"profile"===n&&a.HandleProfileSubmit())}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.HandleEnterPressed)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.HandleEnterPressed),window.clearTimeout(this.errorFadeTimer),window.clearTimeout(this.loadingTimer)}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.error,r=t.errorShowing,i=t.errorLevel,s=t.email,c=t.password,l=t.passwordConfirm,m=t.firstName,u=t.lastName,d=t.image,h=t.formTarget,p=t.formLoading,g=this.props,f=g.auth,v=g.user;return!f||!v||v.name&&v.image||(a="profile"),o.a.createElement("div",{className:"Auth"},o.a.createElement("img",{className:"logo",src:"/doko-logo.svg",alt:"logo"}),o.a.createElement(pe,{error:n,level:i,show:r}),o.a.createElement("div",{className:"outer-container",style:{transform:"translateX(-".concat(this.GetPageXPos(a),"vw)")}},o.a.createElement(Te,{email:s,password:c,ChangeField:this.ChangeField,HandleLogin:this.HandleLogin,HandleFacebookClick:function(){e.SetLoading(!0,"fb-login")},HandleFacebookLogin:this.HandleFacebookLogin,HandleGoogleClick:function(){return e.SetLoading(!0,"g-login")},HandleGoogleLogin:this.HandleGoogleLogin,ChangePage:this.ChangePage,HandleError:this.SetError,loginLoading:"login"===h&&p,fbLoginLoading:"fb-login"===h&&p,gLoginLoading:"g-login"===h&&p}),o.a.createElement(He,{email:s,password:c,passwordConfirm:l,ChangeField:this.ChangeField,HandleSignup:this.HandleSignup,ChangePage:this.ChangePage,loading:"signup"===h&&p}),o.a.createElement(Fe,{auth:f,image:d,SetImage:function(t){return e.setState({image:t})},firstName:m,lastName:u,ChangeField:this.ChangeField,HandleProfileSubmit:this.HandleProfileSubmit,HandleError:this.SetError,loading:"profile-update"===h&&p})),o.a.createElement(Me,{parallaxX:this.GetPageXPos(a)}))}}]),t}(n.Component),Ae=a(58);a.n(Ae).a.config();var Ue=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={auth:null,user:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.auth,n=t.user;return o.a.createElement("div",{className:"App"},null!==a&&null!==n&&n.name&&n.image?o.a.createElement(Pe,{user:n,auth:a,SetAuth:function(t,a){e.setState({auth:t,user:a})}}):o.a.createElement(De,{auth:a,user:n,SetAuth:function(t,a){e.setState({auth:t,user:a})}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},12:function(e,t,a){},25:function(e,t,a){},51:function(e,t,a){},62:function(e,t,a){e.exports=a(119)},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},97:function(e,t){}},[[62,1,2]]]);
//# sourceMappingURL=main.6e6d0f79.chunk.js.map