{"version":3,"sources":["components/inputs/TextInput/TextInput.js","components/display/Icons/CheckIcon.js","components/inputs/Button/Button.js","components/display/Icons/AddIcon.js","components/display/Icons/RoomsIcon.js","components/display/Icons/SearchIcon.js","components/display/Icons/BackIcon.js","components/display/Icons/LocationIcon.js","pages/Home/HomeUI/pages/AddPage.js","components/display/Icons/TackPinnedIcon.js","components/display/ProfileImg/ProfileImg.js","pages/Home/HomeUI/pages/RoomsPage.js","pages/Home/HomeUI/pages/SearchPage.js","components/display/Icons/LogoutIcon.js","functions/ImageTools.js","components/display/Icons/CameraIcon.js","functions/api.js","components/inputs/ImageUpload/ImageUpload.js","pages/Home/HomeUI/pages/SettingsPage.js","pages/Home/HomeUI/HomeUI.js","pages/Home/HomeUI/ValidateForm.js","pages/Home/HomeUI/ProfileUpdate.js","pages/Home/HomeUI/HandleSearch.js","pages/Home/Map/Point.js","pages/Home/Map/Map.js","components/display/Icons/CrownIcon.js","components/display/Icons/TackIcon.js","pages/Home/chat/ChatsList/ChatSelector.js","pages/Home/chat/ChatsList/ChatsList.js","pages/Home/chat/Chatroom/Header/Header.js","pages/Home/chat/Chatroom/Body/Body.js","pages/Home/chat/Chatroom/Inputs/AutoResizableTextArea/AutoResizableTextArea.js","pages/Home/chat/Chatroom/Inputs/Inputs.js","pages/Home/chat/Chatroom/Chatroom.js","pages/Home/CreateRoom/CrossHair/CrossHair.js","pages/Home/CreateRoom/CreateRoom.js","components/display/Error/Error.js","pages/Home/functions/FilterRooms.js","functions/helpers.js","pages/Home/functions/HandleNewRooms.js","pages/Home/functions/HandleNewMessage.js","pages/Home/functions/HandleSocket.js","pages/Home/functions/ProcessLocation.js","pages/Home/Home.js","pages/Auth/Login.js","pages/Auth/Signup.js","pages/Auth/ProfileSetup.js","pages/Auth/CityBackgroundDisplay.js","pages/Auth/Auth.js","App.js","serviceWorker.js","index.js"],"names":["TextInput","_ref","id","className","name","value","type","placeholder","onChange","onBlur","color","style","disabled","react_default","a","createElement","concat","CheckIcon","xmlns","width","height","viewBox","data-name","d","transform","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","Button","noBack","primary","profile","icon","svgIcon","iconAlt","onClick","alt","loading","success","react_loading_default","Icons_CheckIcon","src","AddIcon","x2","RoomsIcon","SearchIcon","y2","cx","cy","r","BackIcon","y1","LocationIcon","AddPage","title","onTitleChange","onSubmit","htmlFor","inputs_TextInput_TextInput","inputs_Button_Button","Icons_LocationIcon","TackIcon","rx","ProfileImg","_this$props","this","props","img","size","Object","objectSpread","backgroundImage","React","PureComponent","RoomsPage","createdRooms","pinnedRooms","OpenRoom","PinRoom","DeleteRoom","length","map","room","i","RoomsPage_ChatListing","message","messages","key","Icons_SearchIcon","created","Component","ChatListing","state","deleteFormOpen","_this","onDeleteFormOpen","e","stopPropagation","setState","onDeleteFormClose","onDeleteRoom","_id","onUnPin","_this$props2","ownedByUser","creator","TackPinnedIcon","display_ProfileImg_ProfileImg","sender","image","SearchPage","place","onPlaceChange","rooms","onRoomsChange","LogoutIcon","hasBlobConstructor","Blob","Boolean","hasArrayBufferViewSupport","Uint8Array","hasToBlobSupport","HTMLCanvasElement","prototype","toBlob","hasBlobSupport","ArrayBuffer","atob","hasReaderSupport","FileReader","URL","ImageTools","file","maxDimensions","Promise","resolve","reject","every","resize","processed","callback","isSupported","match","document","onload","imgEvt","isTooLarge","canvas","getContext","drawImage","blob","_toBlob","_loadImage","byteString","dataURIParts","toDataURL","split","indexOf","decodeURIComponent","arrayBuffer","intArray","charCodeAt","mimeString","bb","append","getBlob","reader","evt","target","result","readAsDataURL","createObjectURL","CameraIcon","baseUrl","process","API","endpoint","body","payload","postData","JSON","stringify","handleResponse","fetch","auth","headers","formData","postFormData","socket","userID","searchLoc","zoom","downloaded","lastDownloadTime","emit","on","roomData","err","console","error","promise","then","response","contentType","get","json","text","log","Error","ConnectSocket","user","io","rejectUnauthorized","method","accept","Content-type","subscriptions","ImageUpload","uploading","UploadImage","files","processedFile","FormData","data","SetImage","url","onSuccess","catch","onError","toString","Image","prevProps","_this2","_this$state","Icons_CameraIcon","SettingsPage","onImageChange","email","onEmailChange","password","onPasswordChange","passwordConfirm","onPasswordConfirmChange","firstName","onFirstNameChange","lastName","onLastNameChange","onLogout","HandleError","inputs_ImageUpload_ImageUpload","autocomplete","Icons_LogoutIcon","HomeUI","page","addRoomTitle","searchLocation","searchRooms","showingDynamicRoomSearch","changeImage","changeEmail","changePassword","changePasswordConfirm","changeFirstName","changeLastName","formTarget","formLoading","formSuccess","SwitchPage","ChangeField","string","field","defineProperty","SetSuccess","window","clearTimeout","successTimer","setTimeout","GetButtonX","index","hide","open","windowWidth","HandleEnterPressed","AddRoom","HandleSearch","ProfileUpdate","BeginPlacingRoom","ValidateForm","bind","assertThisInitialized","newUser","oldName","SendPost","res","SetAuth","token","FilterRooms","SendSecure","query","status","location","results","geometry","MoveMap","latitude","lat","longitude","lng","SetMenuOpen","handleError","addEventListener","removeEventListener","Logout","_this$state2","undefined","Icons_AddIcon","left","Icons_RoomsIcon","Icons_BackIcon","CSSTransition","in","timeout","unmountOnExit","classNames","pages_AddPage","pages_RoomsPage","pages_SearchPage","pages_SettingsPage","Point","SelectRoom","selected","chatNumber","data-selected","data-room","Map","viewport","oldViewport","mapLoaded","mapInstance","pulse","onMapReady","coords","transitionDuration","transitionInterpolator","LinearInterpolator","transitionEasing","easeCubic","SetViewport","SearchMap","placingRoom","newProj","project","oldProj","screenDistX","Math","abs","x","screenDistY","y","SearchForNewRooms","mapRef","getMap","moveCoordinates","filteredRooms","selectedRoom","esm","Home_Map_Point","userPosition","CreateRoomUI","assign","onViewportChange","mapStyle","maxZoom","minZoom","onMouseUp","onTouchEnd","onTransitionEnd","onLoad","ref","ShowPointers","offsetX","offsetY","CrownIcon","ChatSelector","ChatClick","onPin","membersCount","members","pinned","substr","Icons_CrownIcon","Icons_TackIcon","distance","member","ChatsList","DisplayRooms","ChatsList_ChatSelector","selectedRoomIndex","chats","scrollLeft","elem","Header","chatroom","CloseRoom","Body","UserSentMessage","Message","_ref2","_ref3","AutoResizableTextArea","rows","minRows","maxRows","shiftPressed","handleChange","event","textareaLineHeight","fontSize","previousRows","currentRows","scrollHeight","scrollTop","val","SetValue","handleKeyUp","handleKeyDown","trim","onSend","lineHeight","Inputs","SendMessage","Inputs_AutoResizableTextArea_AutoResizableTextArea","Chatroom","Chatroom_Body_Body","Chatroom_Inputs_Inputs","sendTime","Date","toISOString","Chatroom_Header_Header","CrossHair","CreateRoom","searchQuery","SendSearchQuery","roomTitle","Close","errorTimeout","newRoom","CreateRoom_CrossHair_CrossHair","level","show","String","search","ret","toLowerCase","filter","includes","CalcDistance","lat1","lon1","lat2","lon2","p","c","cos","asin","sqrt","Tween","min","max","speed","HandleNewRooms","newRooms","_rooms","searchString","lastSearchedLocation","forEach","push","apply","toConsumableArray","SortRooms","slice","dontPan","now","sort","other","AdjustRoom","unshift","HandleSocket","call","roomID","openedRoom","newMessageData","find","pinnedRoom","createdRoom","StartTrackingLocation","_StartTrackingLocation","arguments","_callee","_this3","regenerator_default","wrap","_context","prev","next","GetInitialLocation","pos","WatchLocation","sent","abrupt","stop","navigator","geolocation","getCurrentPosition","position","handleLocation","handleLocationError","watchPosition","code","Home","dataReady","menuOpen","chatValue","errorLevel","errorShowing","newRoomName","innerWidth","InitiateApp","GetUserSpecificRooms","onDataReady","_callee2","_context2","_callee3","_context3","RequestRooms","chat","ResizeHandler","mapReady","ToggleMainMenu","onOff","SetChatValue","roomName","CancelPlacingRoom","Home_CreateRoom_CreateRoom","options","splice","findIndex","subbedRoom","errorString","errorFadeTimer","_this$state3","display_Error_Error","Home_HomeUI_HomeUI","chat_ChatsList_ChatsList","chat_Chatroom_Chatroom","Home_Map_Map","Login","HandleLogin","HandleFacebookLogin","HandleGoogleLogin","ChangePage","loginLoading","fbLoginLoading","gLoginLoading","HandleFacebookClick","HandleGoogleClick","facebook_login_render_props_default","appId","fields","render","renderProps","google_login_default","clientId","onFailure","Signup","HandleSignup","Profile","HandleProfileSubmit","CityBackgroundDisplay","parallaxX","Auth","SetLoading","SetError","accessToken","filteredData","imageURL","picture","tokenId","googleId","profileObj","imageUrl","loadingTimer","GetPageXPos","Auth_Login","Auth_Signup","ProfileSetup","Auth_CityBackgroundDisplay","dotenv","config","App","pages_Home_Home","pages_Auth_Auth","hostname","ReactDOM","src_App_0","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ef1fc419.chunk.js","sourcesContent":["import React from 'react'\nimport './TextInput.css'\n\nconst TextInput = ({id, className, name, value, type, placeholder, onChange, color, onBlur, style, disabled}) => (\n  <input\n    id={id}\n    className={`TextInput ${className}`}\n    name={name}\n    placeholder={placeholder}\n    type={type || \"\"}\n    onChange={onChange}\n    value={value}\n    onBlur={onBlur}\n    style={style}\n    disabled={disabled}\n  />\n)\n\nexport default TextInput\n","import React from 'react'\n\nimport './Icons.css'\n\nconst CheckIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"26.728\" height=\"20.613\" viewBox=\"0 0 26.728 20.613\">\n    <path id=\"check-icon\" data-name=\"Path 24\" d=\"M137.715-105.083l8.652,8.712L161.443-113.3\" transform=\"translate(-136.215 114.796)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\"/>\n  </svg>\n)\n\nexport default CheckIcon\n","import React from 'react'\nimport './Button.css'\n\nimport CheckIcon from '../../display/Icons/CheckIcon'\nimport ReactLoading from 'react-loading'\n\nconst Button = ({\n  noBack, primary, profile, icon,\n  svgIcon, iconAlt, value, onClick,\n  alt, style, className, id, loading,\n  success, disabled\n}) => (\n  <button\n    id={id}\n    className={`button ${className} ${icon ? \"icon\":\"\"} ${profile ? \"profile\":\"\"} ${value ? \"value\":\"\"} ${primary ? \"primary\":\"\"} ${noBack ? \"no-back\":\"\"} ${success ? \"success\":\"\"}`}\n    onClick={onClick}\n    alt={alt||\"button\"}\n    disabled={loading || success || disabled}\n    style={style}\n  >\n    {loading ? (<ReactLoading type=\"spin\" color={primary ? \"white\":\"#707070\"} height={32} width={32} />):(success ? (<CheckIcon color=\"white\"/>):(\n      <div className=\"button-inner\">\n        {icon ? <img className=\"button-icon\" src={icon} alt={iconAlt || \"button icon\"}/>:null}\n        {svgIcon}\n        {value ? <span>{value}</span>:null}\n      </div>\n      )\n    )}\n  </button>\n)\n\nexport default Button\n","import React from 'react'\n\nimport './Icons.css'\n\nconst AddIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"23\" height=\"23\" viewBox=\"0 0 23 23\">\n    <g id=\"add-icon\" data-name=\"Group 37\" transform=\"translate(-29 -21)\">\n      <line id=\"Line_4\" data-name=\"Line 4\" x2=\"20\" transform=\"translate(30.5 32.5)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n      <line id=\"Line_16\" data-name=\"Line 16\" x2=\"20\" transform=\"translate(40.5 22.5) rotate(90)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n    </g>\n  </svg>\n)\n\nexport default AddIcon\n","import React from 'react'\n\nimport './Icons.css'\n\nconst RoomsIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"23\" height=\"21\" viewBox=\"0 0 23 21\">\n    <g id=\"rooms-icon\" data-name=\"Group 42\" transform=\"translate(-29 -22)\">\n      <line id=\"Line_3\" data-name=\"Line 3\" x2=\"14\" transform=\"translate(36.5 23.5)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n      <line id=\"Line_4\" data-name=\"Line 4\" x2=\"20\" transform=\"translate(30.5 32.5)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n      <line id=\"Line_5\" data-name=\"Line 5\" x2=\"7\" transform=\"translate(43.5 41.5)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n    </g>\n  </svg>\n)\n\nexport default RoomsIcon\n","import React from 'react'\n\nimport './Icons.css'\n\nconst SearchIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"28.758\" height=\"28.758\" viewBox=\"0 0 28.758 28.758\">\n    <g id=\"magnifying_glass\" data-name=\"magnifying glass\" transform=\"translate(124.758 -186.992)\">\n      <line id=\"Line_2\" data-name=\"Line 2\" x2=\"4.789\" y2=\"4.539\" transform=\"translate(-103.5 208.5)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n      <g id=\"Ellipse_31\" data-name=\"Ellipse 31\" transform=\"translate(-124.758 201.371) rotate(-45)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\">\n        <circle cx=\"10.168\" cy=\"10.168\" r=\"10.168\" stroke=\"none\"/>\n        <circle cx=\"10.168\" cy=\"10.168\" r=\"8.668\" fill=\"none\"/>\n      </g>\n    </g>\n  </svg>\n)\n\nexport default SearchIcon\n","import React from 'react'\n\nimport './Icons.css'\n\nconst BackIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"26.109\" height=\"25.231\" viewBox=\"0 0 26.109 25.231\">\n    <g id=\"back-icon\" transform=\"translate(-26.702 -33.747)\">\n      <line id=\"Line_11\" data-name=\"Line 11\" x2=\"22.488\" transform=\"translate(28.823 46.363)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n      <line id=\"Line_12\" data-name=\"Line 12\" y1=\"10.494\" x2=\"10.494\" transform=\"translate(28.823 35.869)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n      <line id=\"Line_13\" data-name=\"Line 13\" x2=\"10.494\" y2=\"10.494\" transform=\"translate(28.823 46.363)\" fill=\"none\" stroke={color} strokeLinecap=\"round\" strokeWidth=\"3\"/>\n    </g>\n  </svg>\n)\n\nexport default BackIcon\n","import React from 'react'\n\nimport './Icons.css'\n\nconst LocationIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"29\" height=\"29\" viewBox=\"0 0 29 29\">\n    <g id=\"location-icon\" transform=\"translate(-324.5 -627.5)\">\n      <g id=\"Ellipse_33\" data-name=\"Ellipse 33\" transform=\"translate(324.5 627.5)\" fill=\"none\" stroke={color} strokeWidth=\"3\">\n        <circle cx=\"14.5\" cy=\"14.5\" r=\"14.5\" stroke=\"none\"/>\n        <circle cx=\"14.5\" cy=\"14.5\" r=\"13\" fill=\"none\"/>\n      </g>\n      <g id=\"Ellipse_34\" data-name=\"Ellipse 34\" transform=\"translate(332.5 635.5)\" fill={color} stroke={color} strokeWidth=\"3\">\n        <circle cx=\"6.5\" cy=\"6.5\" r=\"6.5\" stroke=\"none\"/>\n        <circle cx=\"6.5\" cy=\"6.5\" r=\"5\" fill=\"none\"/>\n      </g>\n    </g>\n  </svg>\n)\n\nexport default LocationIcon\n","import React from 'react'\nimport './Pages.css'\n\nimport LocationIcon from '../../../../components/display/Icons/LocationIcon'\nimport TextInput from '../../../../components/inputs/TextInput/TextInput'\nimport Button from '../../../../components/inputs/Button/Button'\n\nconst AddPage = ({title, onTitleChange, onSubmit, loading, success}) => (\n  <div className=\"add-page home-ui-page\">\n    <h1 className=\"home-ui-title\">Create Room</h1>\n\n    <label className=\"home-ui-label\" htmlFor=\"add-page-title\">Title</label>\n    <TextInput id=\"add-page-title\" className=\"home-ui-input\" value={title} onChange={onTitleChange} placeholder=\"eg: Great food Here!\" />\n\n    <Button\n      primary\n      svgIcon={<LocationIcon color=\"white\" />}\n      value=\"Place Room\"\n      loading={loading}\n      success={success}\n      onClick={onSubmit}\n    />\n  </div>\n)\n\nexport default AddPage\n","import React from 'react'\n\nimport './Icons.css'\n\nconst TackIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"19.255\" height=\"20.325\" viewBox=\"0 0 19.255 20.325\">\n    <g id=\"tack\" transform=\"translate(0 0)\">\n      <g id=\"Group_74\" data-name=\"Group 74\" transform=\"translate(0 0)\">\n        <g id=\"Group_73\" data-name=\"Group 73\">\n          <path id=\"Path_14\" data-name=\"Path 14\" d=\"M174.976,181.924v-4.84h1.07a1.07,1.07,0,0,0,1.07-1.07v-4.279a1.07,1.07,0,0,0-1.07-1.07H163.209a1.07,1.07,0,0,0-1.07,1.07v4.279a1.07,1.07,0,0,0,1.07,1.07h1.07v4.84a9.661,9.661,0,0,0-4.279,8,1.07,1.07,0,0,0,1.07,1.07h17.115a1.07,1.07,0,0,0,1.07-1.07A9.661,9.661,0,0,0,174.976,181.924Zm-12.758,6.926a7.525,7.525,0,0,1,3.666-5.409,1.07,1.07,0,0,0,.535-.925v-6.5a1.07,1.07,0,0,0-1.07-1.07h-1.07V172.8h10.7v2.139h-1.07a1.07,1.07,0,0,0-1.07,1.07v6.5a1.07,1.07,0,0,0,.535.925,7.526,7.526,0,0,1,3.666,5.409h-14.82Z\" transform=\"translate(-160 -170.665)\" fill={color}/>\n        </g>\n      </g>\n      <rect id=\"Rectangle_59\" data-name=\"Rectangle 59\" width=\"5.415\" height=\"2.106\" rx=\"1.053\" transform=\"translate(3.443 4.246)\" fill={color}/>\n    </g>\n  </svg>\n\n)\n\nexport default TackIcon\n","import React from 'react'\nimport './ProfileImg.css'\n\nclass ProfileImg extends React.PureComponent {\n  render() {\n    let {img, color, size, style, className} = this.props\n    return (\n      <div className={`profile-img ${className} ${color}`} style={{...style, backgroundImage: `url(${img})`, width: size, height: size}}></div>\n    )\n  }\n}\n\nexport default ProfileImg\n","import React, {Component} from 'react'\nimport './Pages.css'\n\nimport Button from '../../../../components/inputs/Button/Button'\n\nimport SearchIcon from '../../../../components/display/Icons/SearchIcon'\nimport TackPinnedIcon from '../../../../components/display/Icons/TackPinnedIcon'\nimport ProfileImg from '../../../../components/display/ProfileImg/ProfileImg'\n\nclass RoomsPage extends Component {\n  render() {\n    let {createdRooms, pinnedRooms, OpenRoom, PinRoom, DeleteRoom} = this.props\n\n    return (\n      <div className=\"rooms-page home-ui-page\">\n        <h1 className=\"home-ui-title\">Pinned Rooms</h1>\n        <div className=\"created-rooms-container\">\n          {pinnedRooms.length ? pinnedRooms.map((room, i) => (\n            <ChatListing room={room} message={room.messages[0]} OpenRoom={OpenRoom} PinRoom={PinRoom} key={i} />\n          )) : (\n            <div className=\"no-data-container\">\n              <SearchIcon color=\"#707070\" />\n              <p>No rooms pinned!</p>\n            </div>\n          )}\n        </div>\n\n        <h2 className=\"home-ui-title\">Created Rooms</h2>\n        <div className=\"subscribed-rooms-container\">\n          {createdRooms.length ? createdRooms.map((room, i) => (\n            <ChatListing room={room} message={room.messages[0]} OpenRoom={OpenRoom} DeleteRoom={DeleteRoom} key={i} created />\n          )) : (\n            <div className=\"no-data-container\">\n              <SearchIcon color=\"#707070\" />\n              <p>No rooms created!</p>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default RoomsPage\n\nclass ChatListing extends React.PureComponent {\n  state = {\n    deleteFormOpen: false\n  }\n\n  onClick = () => {this.props.OpenRoom(this.props.room)}\n  onDeleteFormOpen = (e) => {e.stopPropagation(); this.setState({deleteFormOpen: true})}\n  onDeleteFormClose = (e) => {e.stopPropagation(); this.setState({deleteFormOpen: false})}\n\n  onDeleteRoom = (e) => {e.stopPropagation(); this.props.DeleteRoom(this.props.room._id)}\n  onUnPin = (e) => {e.stopPropagation(); this.props.PinRoom(this.props.room._id)}\n\n  render(){\n    let {room, created, message} = this.props\n    let {deleteFormOpen} = this.state\n\n\n    return (\n      <div className={`chat-listing ${room.ownedByUser ? \"owner\" : room.creator.color}`} onClick={this.onClick}>\n        <h1>{room.name}</h1>\n        {!created && <Button className={`subscription-button pinned`} svgIcon={<TackPinnedIcon/>} noBack onClick={this.onUnPin} />}\n        {created && !deleteFormOpen && <Button className=\"delete-button\" noBack value=\"Delete\" onClick={this.onDeleteFormOpen} />}\n        {created && deleteFormOpen && (\n          <div className=\"delete-form\">\n            <p>Are you Sure?</p>\n            <Button value=\"Yes\" className=\"delete-form-button\" onClick={this.onDeleteRoom} />\n            <Button value=\"Nevermind\" primary className=\"delete-form-button\" onClick={this.onDeleteFormClose} />\n          </div>\n        )}\n        {message && (\n          <div className=\"last-message\">\n            <ProfileImg img={message.sender.image} size={23}/>\n            <p>{message.message}</p>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport './Pages.css'\n\nimport SearchIcon from '../../../../components/display/Icons/SearchIcon'\nimport TextInput from '../../../../components/inputs/TextInput/TextInput'\nimport Button from '../../../../components/inputs/Button/Button'\n\nconst SearchPage = ({place, onPlaceChange, rooms, onRoomsChange, onSubmit, loading, success}) => (\n  <div className=\"search-page home-ui-page\">\n    <h1 className=\"home-ui-title\">Search</h1>\n\n    <label className=\"home-ui-label\" htmlFor=\"search-page-place\">Find a Place.</label>\n    <TextInput id=\"search-page-place\" className=\"home-ui-input\" value={place} onChange={onPlaceChange} placeholder=\"eg: Austin, Japan or 96813\" />\n\n    <label className=\"home-ui-label\" htmlFor=\"search-page-rooms\">Find a Room.</label>\n    <TextInput id=\"search-page-rooms\" className=\"home-ui-input\" value={rooms} onChange={onRoomsChange} placeholder=\"eg: Food, Music, or Beers\" />\n\n    <Button\n      primary\n      svgIcon={<SearchIcon color=\"white\" />}\n      value=\"Begin Search\"\n      loading={loading}\n      success={success}\n      onClick={onSubmit}\n    />\n  </div>\n)\n\nexport default SearchPage\n","import React from 'react'\n\nimport './Icons.css'\n\nconst LogoutIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"26.025\" height=\"27.919\" viewBox=\"0 0 26.025 27.919\">\n    <g id=\"Group_96\" data-name=\"Group 96\" transform=\"translate(1 1)\">\n      <path id=\"Path_7\" data-name=\"Path 7\" d=\"M28.792,24.434h-6.76A3.332,3.332,0,0,1,18.7,21.106V4.813a3.332,3.332,0,0,1,3.328-3.328H28.9A.743.743,0,1,0,28.9,0h-6.87a4.818,4.818,0,0,0-4.813,4.813V21.106a4.818,4.818,0,0,0,4.813,4.813h6.76a.743.743,0,1,0,0-1.485Z\" transform=\"translate(-17.219)\" fill=\"none\" stroke={color} strokeWidth=\"2\"/>\n      <path id=\"Path_8\" data-name=\"Path 8\" d=\"M138.644,141.263l-4.72-4.72a.743.743,0,0,0-1.051,1.051l3.454,3.454H121.262a.743.743,0,1,0,0,1.485h15.066l-3.454,3.454a.745.745,0,0,0,.523,1.271.725.725,0,0,0,.523-.22l4.72-4.72A.742.742,0,0,0,138.644,141.263Z\" transform=\"translate(-114.837 -128.826)\" fill=\"none\" stroke={color} strokeWidth=\"2\"/>\n    </g>\n  </svg>\n)\n\nexport default LogoutIcon\n","let hasBlobConstructor = typeof(Blob) !== 'undefined' && (function () {\n    try {\n        return Boolean(new Blob());\n    } catch (e) {\n        return false;\n    }\n}());\n\nlet hasArrayBufferViewSupport = hasBlobConstructor && typeof(Uint8Array) !== 'undefined' && (function () {\n    try {\n        return new Blob([new Uint8Array(100)]).size === 100;\n    } catch (e) {\n        return false;\n    }\n}());\n\nlet hasToBlobSupport = (typeof HTMLCanvasElement !== \"undefined\" ? HTMLCanvasElement.prototype.toBlob : false);\n\nlet hasBlobSupport = (hasToBlobSupport || (typeof Uint8Array !== 'undefined' && typeof ArrayBuffer !== 'undefined' && typeof atob !== 'undefined'));\n\nlet hasReaderSupport = (typeof FileReader !== 'undefined' || typeof URL !== 'undefined');\n\nexport default class ImageTools {\n    static process(file, maxDimensions){\n      return new Promise((resolve, reject)=> {\n\n        const types = ['image/png', 'image/jpeg']\n        if(types.every(type => file.type !== type))\n          reject(`File type not supported`)\n\n        if (file.size > 150000)\n          reject(`Image too large`)\n\n        this.resize(file, maxDimensions, (file, processed) => {\n          resolve(file)\n        })\n      })\n    }\n\n    static resize(file, maxDimensions, callback) {\n        if (typeof maxDimensions === 'function') {\n            callback = maxDimensions;\n            maxDimensions = {\n                width: 120,\n                height: 120\n            };\n        }\n\n        if (!ImageTools.isSupported() || !file.type.match(/image.*/)) {\n            callback(file, false);\n            return false;\n        }\n\n\n        if (file.type.match(/image\\/gif/)) {\n            // Not attempting, could be an animated gif\n            callback(file, false);\n            // TODO: use https://github.com/antimatter15/whammy to convert gif to webm\n            return false;\n        }\n\n        let image = document.createElement('img');\n\n        image.onload = (imgEvt) => {\n            let width  = image.width;\n            let height = image.height;\n            let isTooLarge = false;\n\n            if (width >= height && width > maxDimensions.width) {\n                // width is the largest dimension, and it's too big.\n                height *= maxDimensions.width / width;\n                width = maxDimensions.width;\n                isTooLarge = true;\n            } else if (height > maxDimensions.height) {\n                // either width wasn't over-size or height is the largest dimension\n                // and the height is over-size\n                width *= maxDimensions.height / height;\n                height = maxDimensions.height;\n                isTooLarge = true;\n            }\n\n            if (!isTooLarge) {\n                // early exit; no need to resize\n                callback(file, false);\n                return;\n            }\n\n            let canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n\n            let ctx = canvas.getContext('2d');\n            ctx.drawImage(image, 0, 0, width, height);\n\n            if (hasToBlobSupport) {\n                canvas.toBlob((blob) => {\n                    callback(blob, true);\n                }, file.type);\n            } else {\n                let blob = ImageTools._toBlob(canvas, file.type);\n                callback(blob, true);\n            }\n        };\n        ImageTools._loadImage(image, file);\n\n        return true;\n    }\n\n    static _toBlob(canvas, type) {\n        let dataURI = canvas.toDataURL(type);\n        let dataURIParts = dataURI.split(',');\n        let byteString;\n        if (dataURIParts[0].indexOf('base64') >= 0) {\n            // Convert base64 to raw binary data held in a string:\n            byteString = atob(dataURIParts[1]);\n        } else {\n            // Convert base64/URLEncoded data component to raw binary data:\n            byteString = decodeURIComponent(dataURIParts[1]);\n        }\n        let arrayBuffer = new ArrayBuffer(byteString.length);\n        let intArray = new Uint8Array(arrayBuffer);\n\n        for (let i = 0; i < byteString.length; i += 1) {\n            intArray[i] = byteString.charCodeAt(i);\n        }\n\n        let mimeString = dataURIParts[0].split(':')[1].split(';')[0];\n        let blob = null;\n\n        if (hasBlobConstructor) {\n            blob = new Blob(\n                [hasArrayBufferViewSupport ? intArray : arrayBuffer],\n                {type: mimeString}\n            );\n        } else {\n            let bb = new Blob();\n            bb.append(arrayBuffer);\n            blob = bb.getBlob(mimeString);\n        }\n\n        return blob;\n    }\n\n    static _loadImage(image, file, callback) {\n        if (typeof(URL) === 'undefined') {\n            let reader = new FileReader();\n            reader.onload = function(evt) {\n                image.src = evt.target.result;\n                if (callback) { callback(); }\n            }\n            reader.readAsDataURL(file);\n        } else {\n            image.src = URL.createObjectURL(file);\n            if (callback) { callback(); }\n        }\n    };\n\n    static isSupported() {\n        return (\n               (typeof(HTMLCanvasElement) !== 'undefined')\n            && hasBlobSupport\n            && hasReaderSupport\n        );\n    }\n}\n","import React from 'react'\n\nimport './Icons.css'\n\nconst CameraIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"36.41\" height=\"32.769\" viewBox=\"0 0 36.41 32.769\">\n    <path id=\"camera-icon\" d=\"M14.744,3A3.662,3.662,0,0,0,11.1,6.641V8.462H5.641A3.662,3.662,0,0,0,2,12.1V32.128a3.662,3.662,0,0,0,3.641,3.641H34.769a3.662,3.662,0,0,0,3.641-3.641V12.1a3.662,3.662,0,0,0-3.641-3.641H29.308V6.641A3.662,3.662,0,0,0,25.667,3Zm0,3.641H25.667V8.462A3.662,3.662,0,0,0,29.308,12.1h5.462V32.128H5.641V12.1H11.1a3.662,3.662,0,0,0,3.641-3.641Zm5.462,7.282a7.282,7.282,0,1,0,7.282,7.282A7.31,7.31,0,0,0,20.205,13.923Zm10.923,0a1.821,1.821,0,1,0,1.821,1.821A1.821,1.821,0,0,0,31.128,13.923ZM20.205,17.564a3.641,3.641,0,1,1-3.641,3.641A3.614,3.614,0,0,1,20.205,17.564Z\" transform=\"translate(-2 -3)\" fill={color}/>\n  </svg>\n)\n\nexport default CameraIcon\n","import io from 'socket.io-client'\nconst socketUrl = process.env.REACT_APP_SOCKETURL\nlet baseUrl = process.env.REACT_APP_APIURL\n\nclass API{\n  static SendPost(endpoint, body){\n    let payload = {...this.postData, body: JSON.stringify(body)}\n    return this.handleResponse(fetch(baseUrl+'/'+endpoint, payload))\n  }\n\n  static SendSecure(auth, endpoint, body){\n    let payload = {...this.postData, body: JSON.stringify(body)}\n    payload.headers.auth = auth\n    return this.handleResponse(fetch(baseUrl+'/'+endpoint, payload))\n  }\n\n  static UploadImage(auth, formData){\n    let payload = {...this.postFormData}\n    payload.headers.auth = auth\n    payload.body = formData\n\n    return this.handleResponse(fetch(baseUrl+'/image-upload', payload))\n  }\n\n  static ConnectSocket = (user) => {\n    return new Promise((resolve, reject) => {\n\n      const socket = io(socketUrl, {rejectUnauthorized: false})\n\n      socket.on('connect', ()=>{\n        socket.emit('USER_CONNECTED', user._id)\n        resolve(socket)\n      })\n\n      socket.on('error', (err) => {\n        reject(err)\n      })\n    })\n  }\n\n  static RequestRooms(socket, userID, searchLoc, zoom, downloaded, lastDownloadTime){\n    return new Promise((resolve, reject) => {\n      socket.emit('CLIENT_SEARCHING_AREA', userID, searchLoc, zoom, downloaded, lastDownloadTime)\n      socket.on('SERVER_SENDING_ROOM_DATA', (roomData) => {\n        resolve(roomData)\n      })\n\n      socket.on('SERVER_ERROR_GETTING_ROOM_DATA', (err)=> {\n        console.error(err)\n        reject(err)\n      })\n    })\n  }\n\n\n\n  static handleResponse(promise){\n    return promise\n      .then(response => {\n        const contentType = response.headers.get(\"content-type\");\n        if (contentType && contentType.indexOf(\"application/json\") !== -1) {\n          return response.json()\n        } else {\n          return response.text().then(error => ({error}))\n        }\n        // if(response.status === 500) throw Error('Server Error please try again')\n        // return response.json()\n      })\n      .then((body) => {\n        console.log(body)\n        if(body.error) throw Error(body.error)\n        return body\n      })\n  }\n}\n\nAPI.postData = {\n   method: \"POST\",\n   headers:{\n     accept: \"application/json\",\n     \"Content-type\": \"application/json\",\n   }\n}\n\nAPI.postFormData = {\n  method: \"POST\",\n  headers:{\n    // accept: \"multipart/form-data\",\n    // \"Content-type\": \"multipart/form-data\"\n  }\n}\n\nAPI.subscriptions = [];\n\nexport default API;\n","import React, {Component} from 'react'\n\n//Load styles for image inputs\nimport './ImageUpload.css'\n\n//Loading spinner for use while an image is uploading or downloading.\nimport ReactLoading from 'react-loading'\n\n//a set of image tools that can be used for resizing an image with lots of cross browser support.\nimport ImageTools from \"../../../functions/ImageTools\"\n\n//SVG Camera icon\nimport CameraIcon from '../../display/Icons/CameraIcon'\n\n//Access the API to upload images.\nimport API from '../../../functions/api'\n\nclass ImageUpload extends Component {\n\n  state = {\n    uploading: false, //whether or not this component is currently uploading (shows loading spinner and stops new uploads)\n    image: null, //the image thats been uploaded or null\n  }\n\n  //Main function of the component, processing, resizing and uploading images.\n  UploadImage = (e) => {\n    //when a new image is selected, we first reset any image already in the component and then start\n    //uploading again.\n    this.setState({ image: null, uploading: true })\n\n    //extract the image file from the event.\n    //then check the image for problems, and resize it.\n    const file = e.target.files[0]\n    ImageTools.process(file, {width: 158, height: 158})\n    .then((processedFile) => {\n      //Once resized, we attach the image to a form.\n      const formData = new FormData()\n      formData.append('file', processedFile)\n      return formData\n    })\n    //the form is then sent to the API with an auth key\n    .then(formData => API.UploadImage(this.props.auth, formData))\n    //once the API takes our image, attaches it to our profile and saves it in a bucket we\n    //load the image from the CDN and attach it to this component once loaded.\n    .then((data)=>{\n      this.SetImage(data.url)\n      .then(() => this.props.onSuccess(data))\n    })\n    //if there are any errors we reset the component to default and\n    //pass them up to the parent components to trigger an error component.\n    .catch((err)=>{\n      this.setState({image: null, uploading: false})\n      this.props.onError(err.toString())\n    })\n  }\n\n  componentDidMount(){\n    if(this.props && this.props.image){\n      this.SetImage(this.props.image)\n    }\n  }\n\n  //if there is an image already in the user profile when this component loads,\n  //we want to load it by default.\n  componentDidUpdate(prevProps){\n    if(this.props.image && this.props.image !== prevProps.image){\n      this.SetImage(this.props.image)\n    }\n  }\n\n  SetImage = (src) => {\n    return new Promise((resolve, reject) => {\n      this.setState({uploading: true})\n\n      let img = new Image()\n      img.src = src\n      img.onload = () => {\n        this.setState({image: this.props.image, uploading: false})\n        resolve(img)\n      }\n\n      img.onError = (err) => reject(err)\n    })\n  }\n\n  render() {\n    let {uploading, image} = this.state\n    return (\n      <div id={this.props.id} className=\"image-upload\">\n        <div className=\"image-upload-image\" style={{backgroundImage: image !== null ? `url('${image}')` : 'none'}}>\n          {uploading ? (\n            <ReactLoading type=\"spin\" color=\"#0984E3\" />\n          ):(\n            // button either has an image and is minimized or has no image and covers the whole component.\n            <div className={`image-upload-button ${!image && \"no-image\"}`}>\n              <label htmlFor=\"image-upload-input\">\n                <CameraIcon color=\"#707070\" />\n              </label>\n              {/* file input is hidden so we can just use the label as a button */}\n              <input type='file' id='image-upload-input' onChange={(e)=>this.UploadImage(e)} />\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default ImageUpload\n","import React from 'react'\nimport './Pages.css'\n\nimport LogoutIcon from '../../../../components/display/Icons/LogoutIcon'\nimport TextInput from '../../../../components/inputs/TextInput/TextInput'\nimport Button from '../../../../components/inputs/Button/Button'\nimport ImageUpload from '../../../../components/inputs/ImageUpload/ImageUpload'\n\nconst SettingsPage = ({\n    auth, user, image, onImageChange, email, onEmailChange, password, onPasswordChange,\n    passwordConfirm, onPasswordConfirmChange,\n    firstName, onFirstNameChange, lastName, onLastNameChange,\n    onSubmit, onLogout, HandleError, loading, success\n}) => (\n  <div className=\"settings-page home-ui-page\">\n    <h1 className=\"home-ui-title\">User Settings</h1>\n\n    <label className=\"home-ui-label\" htmlFor=\"settings-page-image-upload\">Change Profile Image.</label>\n    <ImageUpload\n      id=\"settings-page-image-upload\"\n      auth={auth}\n      image={user.image}\n      endpoint='/user-image-upload'\n      onSuccess={(data)=>onImageChange(data.url)}\n      onError={(err)=>HandleError(err, 2)}\n\n    />\n\n    <label className=\"home-ui-label\" htmlFor=\"settings-page-email\">Change Email.</label>\n    <TextInput id=\"settings-page-email\" className=\"home-ui-input\" type=\"email\" autocomplete=\"email\"  value={email} onChange={onEmailChange} placeholder={user.email} />\n\n    <label className=\"home-ui-label\" htmlFor=\"settings-page-password\">Change Password</label>\n    <TextInput id=\"settings-page-password\" type=\"password\" className=\"home-ui-input\" value={password} onChange={onPasswordChange} placeholder=\"***\" />\n    <TextInput id=\"settings-page-password-confirm\" type=\"password\" className=\"home-ui-input\" value={passwordConfirm} onChange={onPasswordConfirmChange} placeholder=\"***\" />\n\n    <label className=\"home-ui-label\" htmlFor=\"settings-page-first-name\">Change Name</label>\n    <TextInput id=\"settings-page-first-name\" className=\"home-ui-input\" value={firstName} onChange={onFirstNameChange} placeholder={user.name.split(\" \")[0]} />\n    <TextInput id=\"settings-page-last-name\" className=\"home-ui-input\" value={lastName} onChange={onLastNameChange} placeholder={user.name.split(\" \")[1]} />\n\n    <Button\n      primary\n      value=\"Update profile\"\n      onClick={onSubmit}\n      loading={loading}\n      success={success}\n    />\n\n    <Button\n      noBack\n      svgIcon={<LogoutIcon color=\"#bcbcbc\" />}\n      value=\"Log Out\"\n      style={{color: \"#bcbcbc\"}}\n      onClick={onLogout}\n    />\n  </div>\n)\n\nexport default SettingsPage\n","import React, { Component } from 'react'\n\nimport TextInput from '../../../components/inputs/TextInput/TextInput'\nimport Button from '../../../components/inputs/Button/Button'\nimport AddIcon from '../../../components/display/Icons/AddIcon'\nimport RoomsIcon from '../../../components/display/Icons/RoomsIcon'\nimport SearchIcon from '../../../components/display/Icons/SearchIcon'\nimport BackIcon from '../../../components/display/Icons/BackIcon'\n\nimport {CSSTransition} from 'react-transition-group'\n\nimport AddPage from './pages/AddPage'\nimport RoomsPage from './pages/RoomsPage'\nimport SearchPage from './pages/SearchPage'\nimport SettingsPage from './pages/SettingsPage'\n\nimport ValidateForm from './ValidateForm'\nimport ProfileUpdate from './ProfileUpdate'\nimport HandleSearch from './HandleSearch'\n\n\nimport './HomeUI.css'\n\nclass HomeUI extends Component {\n\n  state = {\n    page: \"add\", //add||rooms||search||settings\n    addRoomTitle: \"\",\n    searchLocation: \"\",\n    searchRooms: \"\",\n    showingDynamicRoomSearch: false,\n    changeImage: \"\",\n    changeEmail: \"\",\n    changePassword: \"\",\n    changePasswordConfirm: \"\",\n    changeFirstName: \"\",\n    changeLastName: \"\",\n    formTarget: \"\", //Target for success and loading states on the form\n    formLoading: false, //whether or not to show a loading state on target form button\n    formSuccess: false, //whether or not to show a loading state on target form button\n  }\n\n  componentDidMount(){\n    window.addEventListener('keyup', this.HandleEnterPressed)\n  }\n\n  componentWillUnmount(){\n    window.removeEventListener('keyup', this.HandleEnterPressed)\n  }\n\n\n  SwitchPage = (page) => this.setState({page})\n\n  //Change one of the input fields in the form.\n  ChangeField = (string, field) => this.setState({[field]: string})\n\n  //Set the success state, then begin the timer to stop it.\n  SetSuccess = () => {\n    this.setState({formLoading: false, formSuccess: true})\n\n    //begin success timer.\n    window.clearTimeout(this.successTimer)\n    this.successTimer = window.setTimeout(()=>this.setState({formSuccess: false}), 1000)\n  }\n\n  //Set where each of the UI buttons should reside based on the app state\n  GetButtonX = (index) => {\n    if(this.props.hide) return -70\n    if(!this.props.open) return 16\n\n    if(this.props.windowWidth > 750){\n      let width = this.props.windowWidth*0.3\n      return (index*(width/3))+width+28\n    }else{\n      let width = this.props.windowWidth-(52+64)\n      return (index*(width/3))+32\n    }\n  }\n\n  HandleEnterPressed = (e) => {\n    if(!this.props.open || e.key !=='Enter') return\n\n    let {page, formLoading} = this.state\n    if(!formLoading){\n      if(page === \"add\") this.AddRoom()\n      if(page === \"search\") this.HandleSearch()\n      if(page === \"settings\") this.ProfileUpdate()\n    }\n  }\n\n  BeginPlacingRoom = () => {\n    if(this.state.addRoomTitle === \"\") return this.props.HandleError('Rooms need a title', 0)\n\n    this.props.BeginPlacingRoom(this.state.addRoomTitle)\n    this.setState({addRoomTitle: \"\"})\n  }\n\n  ValidateForm = ValidateForm.bind(this)\n\n  //Validates profile setup form, and sends a user update request to the server,\n  //processes the response and either sets the updated profile data or displays an error.\n  ProfileUpdate = ProfileUpdate.bind(this)\n\n  HandleSearch = HandleSearch.bind(this)\n\n  HandleError = (err) => {\n    console.log(\"hello\")\n    this.setState({formLoading: false})\n    this.props.handleError(err, 1)\n  }\n\n  render() {\n    let {\n      auth, user, SetAuth, hide, Logout,\n      open, SetMenuOpen,\n      pinnedRooms, createdRooms, OpenRoom, PinRoom, DeleteRoom\n    } = this.props\n\n    let {\n      page, addRoomTitle, searchLocation, searchRooms, changeImage, changeEmail,\n      changePassword, changePasswordConfirm, changeFirstName,\n      changeLastName, formSuccess, showingDynamicRoomSearch,\n      formLoading, //eslint-disable-next-line\n      formTarget\n    } = this.state\n\n    return (\n      <div className=\"home-ui\">\n        <div id=\"menu\" className={open ? \"open\":undefined}>\n          <div className=\"menu-items\">\n            <div className=\"menu-buttons\">\n              <Button\n                id=\"home-button\"\n                className={`home-ui-button ${page === \"add\" && \"active\"}`}\n                svgIcon={<AddIcon color={page === \"add\" ? \"white\":\"#707070\"} />}\n                primary={page===\"add\"}\n                onClick={() => open ? this.SwitchPage(\"add\") : SetMenuOpen(true)}\n                style={{left: this.GetButtonX(0)}}\n              />\n\n              <Button\n                id=\"rooms-button\"\n                className={`home-ui-button ${page === \"rooms\" && \"active\"}`}\n                svgIcon={<RoomsIcon color={page === \"rooms\" ? \"white\":\"#707070\"} />}\n                primary={page===\"rooms\"}\n                onClick={() => open ? this.SwitchPage(\"rooms\") : SetMenuOpen(true)}\n                style={{left: this.GetButtonX(1)}}\n              />\n\n              <Button\n                id=\"search-button\"\n                className={`home-ui-button ${page === \"search\" && \"active\"}`}\n                svgIcon={<SearchIcon color={page === \"search\" ? \"white\":\"#707070\"} />}\n                primary={page===\"search\"}\n                onClick={() => open ? this.SwitchPage(\"search\") : SetMenuOpen(true)}\n                style={{left: this.GetButtonX(2)}}\n              />\n\n              <Button\n                id=\"settings-button\"\n                className={`home-ui-button ${page === \"settings\" && \"active\"}`}\n                icon={user.image}\n                primary={page===\"settings\"}\n                onClick={() => open ? this.SwitchPage(\"settings\") : SetMenuOpen(true)}\n                style={{left: this.GetButtonX(3)}}\n              />\n\n              <TextInput\n                className={`dynamic-room-search ${showingDynamicRoomSearch && !hide ? \"show\":\"\"}`}\n                disabled={!showingDynamicRoomSearch}\n                value={searchRooms}\n                onChange={(e) => {\n                  this.setState({searchRooms: e.target.value})\n                  this.props.FilterRooms(e.target.value)\n                }}\n                onBlur={()=> searchRooms.length === 0 ? this.setState({showingDynamicRoomSearch: false}):null}\n                style={{left: this.GetButtonX(2)}}\n              />\n            </div>\n\n            <div className=\"menu-page\">\n              <div className=\"background-gradient\"></div>\n              <Button\n                className=\"home-ui-back-button\"\n                svgIcon={<BackIcon color=\"#707070\" />}\n                onClick={() => {\n                  if(page === \"search\" && searchRooms !== \"\")\n                    this.setState({showingDynamicRoomSearch: true})\n                  SetMenuOpen(false)\n                }}\n              />\n\n              <CSSTransition in={open && page === \"add\"} timeout={0} unmountOnExit classNames=\"home-ui-page\">\n                <AddPage\n                  title={addRoomTitle}\n                  onTitleChange={(e)=>this.ChangeField(e.target.value, \"addRoomTitle\")}\n                  onSubmit={this.BeginPlacingRoom}\n                  loading={formTarget=\"create-room\" && formLoading}\n                  success={formTarget=\"create-room\" && formSuccess}\n                />\n              </CSSTransition>\n\n              <CSSTransition in={open && page === \"rooms\"} timeout={0} unmountOnExit classNames=\"home-ui-page\">\n                <RoomsPage\n                  createdRooms={createdRooms}\n                  pinnedRooms={pinnedRooms}\n                  OpenRoom={OpenRoom}\n                  PinRoom={PinRoom}\n                  DeleteRoom={DeleteRoom}\n                />\n              </CSSTransition>\n\n              <CSSTransition in={open && page === \"search\"} timeout={0} unmountOnExit classNames=\"home-ui-page\">\n                <SearchPage\n                  place={searchLocation}\n                  onPlaceChange={(e)=>this.ChangeField(e.target.value, \"searchLocation\")}\n                  rooms={searchRooms}\n                  onRoomsChange={(e)=>this.ChangeField(e.target.value, \"searchRooms\")}\n                  onSubmit={this.HandleSearch}\n                  loading={formTarget=\"search\" && formLoading}\n                  success={formTarget=\"search\" && formSuccess}\n                />\n              </CSSTransition>\n\n              <CSSTransition in={open && page === \"settings\"} timeout={0} unmountOnExit classNames=\"home-ui-page\">\n                <SettingsPage\n                  user={user}\n                  auth={auth}\n                  image={changeImage}\n                  onImageChange={(image) => SetAuth(auth, {...user, image})}\n                  email={changeEmail}\n                  onEmailChange={(e)=>this.ChangeField(e.target.value, \"changeEmail\")}\n                  password={changePassword}\n                  onPasswordChange={(e)=>this.ChangeField(e.target.value, \"changePassword\")}\n                  passwordConfirm={changePasswordConfirm}\n                  onPasswordConfirmChange={(e)=>this.ChangeField(e.target.value, \"changePasswordConfirm\")}\n                  firstName={changeFirstName}\n                  onFirstNameChange={(e)=>this.ChangeField(e.target.value, \"changeFirstName\")}\n                  lastName={changeLastName}\n                  onLastNameChange={(e)=>this.ChangeField(e.target.value, \"changeLastName\")}\n                  onSubmit={this.ProfileUpdate}\n                  onLogout={Logout}\n                  // HandleError={this.HandleError}\n                  loading={formTarget=\"user-update\" && formLoading}\n                  success={formTarget=\"user-update\" && formSuccess}\n                />\n              </CSSTransition>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default HomeUI\n","export default function ValidateForm(page){\n  let {changeEmail, changePassword, changePasswordConfirm, changeFirstName, changeLastName} = this.state\n\n  //empty fields\n  if(page === \"profile-edit\" && (changeEmail.length === 0 && changePassword.length === 0 && changeFirstName.length === 0 && changeLastName.length === 0))\n    return this.props.HandleError(\"Nothing to update\", 0)\n\n  //email validation\n  if(page === \"profile-edit\" && changeEmail.length && changeEmail.match(/^\\S+@\\S+[.][0-9a-z]+$/) === null)\n    return this.props.HandleError(\"Invalid email\", 0)\n\n  //password length validation\n  if(page === \"profile-edit\" && changePassword.length && changePassword.length < 4)\n    return this.props.HandleError(\"Password too short\", 0)\n\n  //password complexity validation\n  if(page === \"profile-edit\" && changePassword.length && changePassword.match(/([0-9].*[a-zA-Z])|([a-zA-Z].*[0-9])/) === null)\n    return this.props.HandleError(\"Password requires at least one letter and one number\", 0)\n\n  //password match validation\n  if(page === \"profile-edit\" && changePassword.length\n    && changePassword !== changePasswordConfirm)\n    return this.props.HandleError(\"Passwords dont match\", 0)\n\n\n  return true\n}\n","import API from '../../../functions/api'\n\nexport default function ProfileUpdate(){\n  let {changeEmail, changePassword, changeFirstName, changeLastName} = this.state\n\n  if(this.ValidateForm(\"profile-edit\")){\n    this.setState({formLoading: true, formTarget:'user-update'})\n\n    let newUser = {...this.props.user}\n    if(changeEmail) newUser.email = changeEmail\n    if(changePassword) newUser.password = changePassword\n    if(changeFirstName) newUser.firstName = changeFirstName\n    if(changeLastName) newUser.lastName = changeLastName\n\n    let oldName = newUser.name.split(\" \")\n    if(changeFirstName && changeLastName) newUser.name = changeFirstName + \" \" + changeLastName\n    else if(changeFirstName) newUser.name = changeFirstName + \" \" + oldName[1]\n    else if(changeLastName) newUser.name = oldName[0] + \" \" + changeLastName\n\n    this.setState({changeEmail:\"\", changePassword:\"\", changePasswordConfirm: \"\", changeFirstName: \"\", changeLastName:\"\"})\n\n    //SendPost returns a promise so we can manipulate the response.\n    API.SendPost('user-update', {\n      auth: this.props.auth,\n      user: newUser\n    })\n    .then((res) => {\n      this.SetSuccess()\n      this.props.SetAuth(res.token, res.user)\n    })\n    .catch(error => {\n      this.props.HandleError(error.toString(), 2)\n      this.setState({formLoading: false})\n    })\n  }\n}\n","import API from '../../../functions/api'\n\nexport default function HandleSearch(){\n  let {searchLocation, searchRooms, page} = this.state\n\n  this.props.FilterRooms(this.state.searchRooms)\n\n  if(searchLocation.length > 0){\n    this.setState({formLoading: true, formTarget:'search', searchLocation:\"\"})\n\n    API.SendSecure(this.props.auth, 'search-location', {query: searchLocation})\n    .then(res => {\n      if(res.status === \"OK\"){\n        this.SetSuccess()\n        let location = res.results[0].geometry.location\n        this.props.MoveMap({latitude: location.lat, longitude: location.lng})\n        this.props.SetMenuOpen(false)\n      }else{\n        if(res.status === \"NO_RESULTS\")\n          this.props.HandleError(\"no results\", 0)\n        else\n          this.props.HandleError(\"error searching\", 3)\n\n        this.setState({formLoading: false})\n      }\n    })\n  }else{\n    if(page === \"search\" && searchRooms !== \"\")\n      this.setState({showingDynamicRoomSearch: true})\n\n    this.props.SetMenuOpen(false)\n  }\n}\n","import React from 'react'\nimport './Point.css'\n\nclass Point extends React.PureComponent {\n\n  onClick = () => {\n    let {room, OpenRoom, SelectRoom} = this.props\n    room.selected ? OpenRoom(room) : SelectRoom(room._id)\n  }\n\n  render() {\n    const {chatNumber, selected, room} = this.props\n    return (\n      <div className={`point ${room.ownedByUser ? \"owner\" : room.creator.color} ${selected ? \"selected\":\"\"}`} onClick={this.onClick} data-selected={room.selected} data-room={room}>\n        <div className=\"point-background\"></div>\n        <span className=\"chat-number\">{chatNumber < 100 ? chatNumber : `100+`}</span>\n      </div>\n    )\n  }\n}\n\nexport default Point\n","import React, { Component } from 'react'\nimport './Map.css'\n\nimport ReactMapGL, {Marker, LinearInterpolator} from 'react-map-gl'\nimport {easeCubic} from 'd3-ease'\n\nimport Button from '../../../components/inputs/Button/Button'\nimport LocationIcon from '../../../components/display/Icons/LocationIcon'\n\nimport Point from './Point'\n\nclass Map extends Component {\n\n  state = {\n    viewport: {\n      width: \"100%\",\n      height: \"100%\",\n      latitude: null,\n      longitude: null,\n      zoom: 12,\n    },\n    oldViewport:null,\n    mapLoaded: false,\n    mapInstance: null,\n    pulse:false\n  }\n\n\n\n\n  //on mount we set a ref for our map gl element.\n  componentDidMount(){\n    this.mapRef && this.setState({mapInstance: this.mapRef.getMap()})\n  }\n\n\n\n\n  //when the map loads, this method will call,\n  //telling the map component and the home component\n  //that our map is ready.\n  onMapReady = () => {\n    this.props.onMapReady()\n    this.setState({mapLoaded: true, oldViewport: {...this.state.viewport}})\n  }\n\n\n\n\n  //Check and see if the moveCoordinates props has updated,\n  //if so, set the viewport to the new coordinates.\n  componentDidUpdate(prevProps){\n    let {moveCoordinates} = this.props\n\n    if(moveCoordinates && moveCoordinates !== prevProps.moveCoordinates)\n      this.MoveMap(moveCoordinates)\n  }\n\n\n\n  //Method to pan the map to a new location with a linear ease.\n  MoveMap = (coords) => {\n    this.setState({\n      viewport: {\n        ...this.state.viewport,\n        longitude: coords.longitude,\n        latitude: coords.latitude,\n        transitionDuration: 500,\n        transitionInterpolator: new LinearInterpolator(),\n        transitionEasing: easeCubic\n      }\n    })\n  }\n\n\n\n\n  //Set the viewport (for internal user in the map component, used to move with mouse interactions)\n  SetViewport = (viewport) => this.setState({viewport})\n\n\n\n\n  //Checks for distances between the maps current point and the last point searched.\n  SearchMap = () => {\n    //if this map is in the middle of placing a room we want to ignore this.\n    //also ignore if the mapdata hasnt loaded yet.\n    if(this.props.placingRoom) return\n    if(this.state.viewport === null || !this.state.viewport.latitude === null) return\n\n    //extract needed data from state\n    let {viewport, oldViewport, mapInstance} = this.state\n\n    //project the current location and the location last searched at into pixel coordinates\n    let newProj = mapInstance.project([viewport.longitude, viewport.latitude]),\n    oldProj = mapInstance.project([oldViewport.longitude, oldViewport.latitude]),\n    //calculate the x and y distance between the two points\n    screenDistX = Math.abs(newProj.x - oldProj.x)/viewport.zoom,\n    screenDistY = Math.abs(newProj.y - oldProj.y)/viewport.zoom\n\n    //if the distance is to great,\n    if((screenDistX > 10 || screenDistY > 10)){\n      //Make a server request for rooms near this location.\n      this.props.SearchForNewRooms(this.props.socket, {latitude: this.state.viewport.latitude, longitude: this.state.viewport.longitude}, this.state.viewport.zoom)\n\n      //set the old viewport state to this as it is now the last place we searched.\n      //also set pulse wich alows a display component to show, signifying a search was started to the user.\n      this.setState({oldViewport: {...this.state.viewport}, pulse: true})\n      setTimeout(()=>this.setState({pulse: false}), 500)\n    }\n\n  }\n\n\n\n\n  //Method for displaying all map pointers associated with room data.\n  ShowPointers(filteredRooms, selectedRoom, OpenRoom, SelectRoom){\n    return filteredRooms.map((room, i) => {\n      return(\n        <Marker key={room._id} latitude={room.location[1]} longitude={room.location[0]}>\n          <Point\n            color={room.color}\n            chatNumber={room.messages.length}\n            selected={room.selected}\n            room={room}\n            OpenRoom={OpenRoom}\n            SelectRoom={SelectRoom}\n          />\n        </Marker>\n      )\n    })\n  }\n\n\n\n\n  render() {\n    let {userPosition, moveCoordinates, selectedRoom, OpenRoom, SelectRoom, filteredRooms, hide, placingRoom, CreateRoomUI} = this.props\n    return (\n      <div className={`Map ${hide ? \"hide\":\"\"} ${this.state.mapLoaded && \"ready\"}`}>\n        <ReactMapGL\n          {...this.state.viewport} // allways map the current viewport.\n          onViewportChange={this.SetViewport} //set the viewport based on changes.\n          mapStyle={process.env.REACT_APP_MAPBOX_STYLE} //the mapbox style for Doko\n\n          //ensure the map styays full width and height through resizing\n          width='100%' height='100%'\n\n          //Max and min zoom for the map.\n          maxZoom={15} minZoom={10}\n\n          //Interaction listeners, to check if we should search for new rooms.\n          onMouseUp={this.SearchMap}\n          onTouchEnd={this.SearchMap}\n          onTransitionEnd={this.SearchMap}\n\n          //the current viewport position, or the position passed down from Home(for when the component is still initializing.)\n          latitude = {(this.state.viewport.latitude || moveCoordinates.latitude)}\n          longitude = {(this.state.viewport.longitude || moveCoordinates.longitude)}\n\n          //onLoad handler, sets the map as ready both in this component and in Home\n          onLoad={this.onMapReady}\n\n          //Set up map ref.\n          ref={map => this.mapRef = map}\n        >\n\n          {/* if not hiding, and there are rooms to show, then show the map pointers */}\n          {!hide && filteredRooms && this.ShowPointers(filteredRooms, selectedRoom, OpenRoom, SelectRoom)}\n\n          {/* if the user position is being tracked, and we are not hiding, show a marker for the users location. */}\n          {userPosition && !hide && (\n            <Marker latitude={userPosition.latitude} longitude={userPosition.longitude} offsetX={-8} offsetY={-8}>\n              <div id=\"location-indicator\"></div>\n            </Marker>\n          )}\n\n          {/* if the user position is being tracked, and we are not hiding, show a button to pan the map to the users location. */}\n          {userPosition && !hide && (\n            <Button svgIcon={<LocationIcon color={\"#707070\"}/>} id=\"location-button\" className={placingRoom || !filteredRooms ? \"bottom\":\"\"} onClick={() => this.MoveMap(userPosition)} />\n          )}\n\n          {/* Whenever we search a new location, display a pulse over the map at that location. */}\n          {this.state.pulse && (\n            <Marker latitude={this.state.oldViewport.latitude} longitude={this.state.oldViewport.longitude}>\n              <div className=\"new-search-marker\"></div>\n            </Marker>\n          )}\n\n          {/* When placing a new room, show the correct UI */}\n          {placingRoom && (\n            CreateRoomUI({latitude: this.state.viewport.latitude, longitude: this.state.viewport.longitude})\n          )}\n\n        </ReactMapGL>\n      </div>\n    )\n  }\n}\n\nexport default Map\n","import React from 'react'\n\nimport './Icons.css'\n\nconst CrownIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"29.72\" height=\"20.897\" viewBox=\"0 0 29.72 20.897\">\n    <path id=\"Path_25\" data-name=\"Path 25\" d=\"M29.313,80.341a1.161,1.161,0,0,0-1.262-.161L21.7,83.273,15.737,76.4a1.161,1.161,0,0,0-1.754,0L8.022,83.273,1.669,80.18A1.161,1.161,0,0,0,.05,81.562L4.462,96.074a1.161,1.161,0,0,0,1.111.823H24.148a1.161,1.161,0,0,0,1.111-.823L29.67,81.562A1.161,1.161,0,0,0,29.313,80.341ZM23.287,94.575H6.433L3.046,83.433l4.761,2.318a1.161,1.161,0,0,0,1.385-.283l5.668-6.535,5.668,6.535a1.161,1.161,0,0,0,1.385.283l4.761-2.318Z\" transform=\"translate(0 -76)\"/>\n  </svg>\n\n)\n\nexport default CrownIcon\n","import React from 'react'\n\nimport './Icons.css'\n\nconst TackIcon = ({color, className}) => (\n  <svg className={`svg-icon ${className}`} xmlns=\"http://www.w3.org/2000/svg\" width=\"19.255\" height=\"27.913\" viewBox=\"0 0 19.255 27.913\">\n    <g id=\"tack\" transform=\"translate(0 0)\">\n      <g id=\"Group_74\" data-name=\"Group 74\" transform=\"translate(0 0)\">\n        <g id=\"Group_73\" data-name=\"Group 73\">\n          <path id=\"Path_14\" data-name=\"Path 14\" d=\"M174.976,181.924v-4.84h1.07a1.07,1.07,0,0,0,1.07-1.07v-4.279a1.07,1.07,0,0,0-1.07-1.07H163.209a1.07,1.07,0,0,0-1.07,1.07v4.279a1.07,1.07,0,0,0,1.07,1.07h1.07v4.84a9.661,9.661,0,0,0-4.279,8,1.07,1.07,0,0,0,1.07,1.07h17.116a1.07,1.07,0,0,0,1.07-1.07A9.661,9.661,0,0,0,174.976,181.924Zm-12.758,6.926a7.525,7.525,0,0,1,3.666-5.409,1.07,1.07,0,0,0,.535-.925v-6.5a1.07,1.07,0,0,0-1.07-1.07h-1.07V172.8h10.7v2.139h-1.07a1.07,1.07,0,0,0-1.07,1.07v6.5a1.07,1.07,0,0,0,.535.925,7.526,7.526,0,0,1,3.666,5.409h-14.82Z\" transform=\"translate(-160 -170.665)\" fill={color}/>\n        </g>\n      </g>\n      <rect id=\"Rectangle_59\" data-name=\"Rectangle 59\" width=\"5.415\" height=\"2.106\" rx=\"1.053\" transform=\"translate(3.443 4.246)\" fill={color}/>\n      <rect id=\"Rectangle_60\" data-name=\"Rectangle 60\" width=\"2.106\" height=\"8.625\" rx=\"1.053\" transform=\"translate(8.558 19.288)\" fill={color}/>\n    </g>\n  </svg>\n\n)\n\nexport default TackIcon\n","import React from 'react'\nimport './ChatsList.css'\n\nimport ProfileImg from '../../../../components/display/ProfileImg/ProfileImg'\n\nimport Button from '../../../../components/inputs/Button/Button'\nimport CrownIcon from '../../../../components/display/Icons/CrownIcon'\nimport TackIcon from '../../../../components/display/Icons/TackIcon'\nimport TackPinnedIcon from '../../../../components/display/Icons/TackPinnedIcon'\n\nclass ChatSelector extends React.PureComponent {\n\n  onClick = () => this.props.ChatClick(this.props.room, this.props.index)\n\n  onPin = (e) => {\n    e.stopPropagation()\n    this.props.PinRoom(this.props.room._id)\n  }\n\n  render() {\n    let {room, membersCount, members, selected, pinned} = this.props\n\n    return (\n      <div\n        className={`chat ${room.ownedByUser ? \"owner\" : room.creator.color} ${selected ? \"active\":\"\"}`}\n        onClick={this.onClick}\n      >\n        <h1 className=\"title\">{room.name.length > 22 ? room.name.substr(0, 22)+'...':room.name}</h1>\n        <Button\n          className={`subscription-button ${(room.ownedByUser || pinned) ? \"pinned\":\"\"}`}\n          svgIcon={room.ownedByUser ? <CrownIcon/> : pinned ? <TackPinnedIcon/>:<TackIcon/>}\n          noBack\n          onClick={!room.ownedByUser ? this.onPin:undefined}\n        />\n        <div className=\"chat-info\">\n          {room.distance && <p className=\"distance\">{~~room.distance > 0 ? ~~room.distance+'mi':'> 1mi'}</p>}\n          <div className=\"member-list\">\n            <ProfileImg img={room.creator.image} size={48} className=\"creator-profile\" />\n            {membersCount > 3 ? <div className=\"member-count\">{membersCount<100 ? membersCount-3 : \"100+\"}</div> : null}\n            {members.map((member, i) => <ProfileImg key={i} className=\"member-listing\" img={member.image} size={48} />)}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ChatSelector\n","import React, { Component } from 'react'\nimport './ChatsList.css'\n\nimport ChatSelector from './ChatSelector'\n\nclass ChatsList extends Component {\n\n  componentDidUpdate(prevProps){\n    let {selectedRoomIndex} = this.props\n    if(prevProps.selectedRoomIndex !== selectedRoomIndex){\n      this.chats.scrollLeft = (selectedRoomIndex*(308+64))\n    }\n  }\n\n  ChatClick = (room, i) => {\n    room.selected ? this.props.OpenRoom(room):this.props.SelectRoom(room._id)\n  }\n\n  DisplayRooms = () => {\n    let {filteredRooms, PinRoom} = this.props\n    if(filteredRooms)\n    return filteredRooms.map((room, i) => {\n      return (\n          <ChatSelector\n            room={room}\n            selected={room.selected}\n            pinned={room.pinned}\n            index={i}\n            key={room._id}\n            members={room.members}\n            membersCount={room.membersCount}\n\n            ChatClick={this.ChatClick}\n            PinRoom={PinRoom}\n          />\n      )\n    })\n  }\n\n  render() {\n    let {hide} = this.props\n    return (\n      <div className={`chats ${hide ? \"hide\":\"\"}`} ref={elem => this.chats = elem}>\n        {this.DisplayRooms()}\n      </div>\n    )\n  }\n}\n\nexport default ChatsList\n","import React from 'react'\nimport ProfileImg from '../../../../../components/display/ProfileImg/ProfileImg'\nimport CrownIcon from '../../../../../components/display/Icons/CrownIcon'\nimport TackIcon from '../../../../../components/display/Icons/TackIcon'\nimport TackPinnedIcon from '../../../../../components/display/Icons/TackPinnedIcon'\nimport Button from '../../../../../components/inputs/Button/Button'\nimport './Header.css'\n\nconst Header = ({user, chatroom, CloseRoom, onPin}) => {\n\n  return (\n    <div className=\"chat-header\">\n      <Button\n        className={`subscription-button ${(chatroom.ownedByUser || chatroom.pinned) ? \"pinned\":\"\"}`}\n        svgIcon={chatroom.ownedByUser ? <CrownIcon/> : chatroom.pinned ? <TackPinnedIcon/>:<TackIcon/>}\n        noBack\n        onClick={!chatroom.ownedByUser ? onPin:undefined}\n      />\n\n      <h1 className=\"chat-title\">{chatroom.name.length > 50 ? `${chatroom.name.substr(0, 50)}...`:chatroom.name}</h1>\n\n      <div className=\"chat-info\">\n        <Button className=\"chat-exit-button\" icon=\"/back-icon.svg\" onClick={CloseRoom}/>\n        <p className=\"distance\">{~~chatroom.distance > 0 ? ~~chatroom.distance+'mi':'> 1mi'}</p>\n        <div className=\"member-list\">\n          <ProfileImg img={chatroom.creator.image} size={48} className=\"creator-profile\" />\n          {chatroom.membersCount > 3 ? <div className=\"member-count\">{chatroom.membersCount<100 ? chatroom.membersCount-3 : \"100+\"}</div> : null}\n          {chatroom.members.map((member, i) => <ProfileImg key={i} className=\"member-listing\" img={member.image} size={48} />)}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Header\n","import React from 'react'\nimport ProfileImg from '../../../../../components/display/ProfileImg/ProfileImg'\n\nimport './Body.css'\n\nconst Body = ({chatroom, messages, user}) => (\n  <div className=\"chat-body\">\n    {\n      messages.length > 0 ? (\n        messages.map((message, i) => (\n          message.sender !== null && message.sender._id === user._id ?\n          <UserSentMessage message={message} key={i}/>:<Message chatroom={chatroom} message={message} key={i}/>\n        ))\n      ): <p className=\"no-messages\">Nobody here but us chickens.</p>\n    }\n    <div className=\"chat-body-spacer\"></div>\n  </div>\n)\n\nexport default Body\n\nfunction Message({chatroom, message}){\n  console.log(chatroom, message)\n  let color = (message.sender && message.sender._id === chatroom.creator._id) ? chatroom.creator.color : message.color\n\n  return(\n    <div className={`chat-message ${color} ${message.sender ? \"\": \"missing-user\"}`}>\n      <ProfileImg className=\"chat-message-sender\" img={message.sender ? message.sender.image : '/user-missing-icon.svg'} size={28} />\n      <p className=\"chat-message-text\">\n        <span className=\"chat-message-name\">{message.sender ? message.sender.name : \"Deleted User\"}</span>\n        {message.message}\n      </p>\n    </div>\n  )\n}\n\nfunction UserSentMessage({message}){\n  return(\n    <div className={`chat-message user-sent`}>\n      <p className=\"chat-message-text\">\n        <span className=\"chat-message-name\">You</span>\n        {message.message}\n      </p>\n    </div>\n  )\n}\n","import React, { Component } from 'react'\nimport './AutoResizableTextArea.css'\n\nclass AutoResizableTextArea extends Component {\n\n  state = {\n    value: '',\n    rows: 1,\n    minRows: 1,\n    maxRows: 5,\n    shiftPressed: false\n  }\n\n  componentDidMount(){\n    this.handleKeyUp = this.handleKeyUp.bind(this)\n    this.handleKeyDown = this.handleKeyDown.bind(this)\n\n    window.addEventListener('keyup', this.handleKeyUp)\n    window.addEventListener('keydown', this.handleKeyDown)\n  }\n\n  componentWillUnmount(){\n    window.removeEventListener('keyup', this.handleKeyUp)\n    window.removeEventListener('keydown', this.handleKeyDown)\n  }\n\n  handleKeyDown(e){if(e.key === 'Shift') {\n    this.setState({shiftPressed:true})}\n  }\n  handleKeyUp(e){\n    if(this.props.value !== \"\"){\n      if(e.key === 'Shift') this.setState({shiftPressed:false})\n      if(e.key === 'Enter' && !this.state.shiftPressed && this.props.value.trim() !== \"\"){\n        this.props.onSend()\n        this.setState({rows: this.state.minRows})\n      }\n    }\n  }\n\n  handleChange = (event) => {\n\t\tconst textareaLineHeight = this.props.fontSize\n\t\tconst { minRows, maxRows } = this.state\n\n\t\tconst previousRows = event.target.rows\n  \tevent.target.rows = minRows // reset number of rows in textarea\n\n\t\tconst currentRows = ~~(event.target.scrollHeight / textareaLineHeight)-1\n\n    if (currentRows === previousRows) {\n    \tevent.target.rows = currentRows\n    }\n\n\t\tif (currentRows >= maxRows) {\n\t\t\tevent.target.rows = maxRows\n\t\t\tevent.target.scrollTop = event.target.scrollHeight\n\t\t}\n\n    let val = event.target.value\n    if(val !== \" \" && val !== \"\\n\"){\n      this.props.SetValue(val)\n      this.setState({rows: currentRows < maxRows ? currentRows : maxRows})\n    }\n\t}\n\n  render() {\n    let {rows} = this.state\n    let {className, fontSize, value} = this.props\n\t\treturn (\n\t\t\t<textarea\n\t\t\t\trows={rows}\n\t\t\t\tvalue={value}\n\t\t\t\tplaceholder={'Enter your text here...'}\n\t\t\t\tclassName={`resizeable-text-area ${className}`}\n\t\t\t\tonChange={this.handleChange}\n        style={{fontSize, lineHeight: fontSize+'px'}}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nexport default AutoResizableTextArea\n","import React from 'react'\nimport AutoResizableTextArea from './AutoResizableTextArea/AutoResizableTextArea'\nimport Button from '../../../../../components/inputs/Button/Button'\n\nimport './Inputs.css'\n\nconst Inputs = ({value, SetValue, SendMessage}) => (\n  <div className=\"chat-inputs\">\n    <AutoResizableTextArea\n      className=\"chat-text-input\"\n      fontSize={24}\n      value={value}\n      SetValue={SetValue}\n      onSend={SendMessage}\n    />\n    <Button className=\"chat-send-button\" primary icon=\"/send-icon.svg\" disabled={value.length === 0} onClick={SendMessage} />\n  </div>\n)\n\nexport default Inputs\n","import React, { Component } from 'react'\n\nimport Header from './Header/Header'\nimport Body from './Body/Body'\nimport Inputs from './Inputs/Inputs'\n\nimport './Chatroom.css'\n\nclass Chatroom extends Component {\n\n  onPin = (e) => {\n    this.props.PinRoom(this.props.chatroom._id)\n  }\n\n  render() {\n    let {user, socket, chatroom, value, SetValue, CloseRoom} = this.props\n\n    return (\n      <div className={`chat-room ${chatroom ? \"open\" : \"\"} ${chatroom ? (chatroom.ownedByUser ? \"owner\" : chatroom.creator.color):\"\"}`}>\n        {chatroom ? (\n          <div className=\"chat-room-container\">\n            <Body chatroom={chatroom} messages={chatroom.messages} user={user} />\n\n            <Inputs\n              value={value}\n              SetValue={SetValue}\n\n              SendMessage={()=>SendMessage(socket, chatroom, value, user, SetValue)}\n            />\n            <div className=\"bottom-gradient\"></div>\n\n            <Header\n              user={user}\n              chatroom={chatroom}\n\n              CloseRoom={CloseRoom}\n              onPin={this.onPin}\n            />\n          </div>\n        ):null}\n      </div>\n    )\n  }\n\n}\n\nexport default Chatroom\n\nfunction SendMessage(socket, chatroom, value, profile, SetValue){\n  if(value !== \"\"){\n    let sendTime = new Date().toISOString()\n\n    socket.emit('CLIENT_SENDING_CHAT', profile._id, chatroom._id, chatroom.creator.color, (chatroom.creator._id === profile._id), value, sendTime)\n    SetValue(\"\")\n  }\n}\n","import React from 'react'\n\nimport './CrossHair.css'\n\nconst CrossHair = () => (\n  <div className=\"cross-hair\">\n    <div className=\"x-axis\"></div>\n    <div className=\"y-axis\"></div>\n    <div className=\"dot\"></div>\n  </div>\n)\n\nexport default CrossHair\n","import React, { Component } from 'react'\nimport './CreateRoom.css'\n\nimport BackIcon from '../../../components/display/Icons/BackIcon'\nimport SearchIcon from '../../../components/display/Icons/SearchIcon'\nimport CheckIcon from '../../../components/display/Icons/CheckIcon'\nimport CrossHair from './CrossHair/CrossHair'\nimport Button from '../../../components/inputs/Button/Button'\nimport TextInput from '../../../components/inputs/TextInput/TextInput'\n\nimport API from '../../../functions/api'\n\nclass CreateRoom extends Component {\n\n  state = {\n    searchQuery: \"\",\n    loading: false,\n  }\n\n  SendSearchQuery = () => {\n    let {auth, MoveMap, HandleError} = this.props\n    let {searchQuery} = this.state\n\n    this.setState({loading: true})\n    if(searchQuery !== \"\"){\n      API.SendSecure(auth, 'search-location', {query: searchQuery})\n      .then(res => {\n        if(res.status === \"OK\"){\n          let location = res.results[0].geometry.location\n          MoveMap({latitude: location.lat, longitude: location.lng})\n        }else{\n          if(res.status === \"NO_RESULTS\")\n            HandleError(\"no results\", 0)\n          else\n            HandleError(\"error searching\", 2)\n        }\n        this.setState({loading: false, searchQuery: \"\"})\n      })\n    }else{\n      HandleError(\"No location entered\", 1)\n      this.setState({loading: false})\n    }\n  }\n\n  CreateRoom = () => {\n    let {socket, roomTitle, coords, userID, Close, HandleError} = this.props\n\n    this.setState({loading: true})\n\n    socket.emit('CLIENT_CREATING_ROOM', userID, {name: roomTitle, coords})\n\n    return new Promise((resolve, reject)=>{\n      let errorTimeout = window.setTimeout(()=>{\n        HandleError('error creating room', 2)\n        Close()\n        reject()\n      }, 30000)\n\n      socket.on('ROOM_CREATED', newRoom => {\n        window.clearTimeout(errorTimeout)\n        Close()\n        resolve(newRoom)\n      })\n    })\n  }\n\n  render() {\n    let {Close} = this.props\n    let {searchQuery, loading} = this.state\n    return (\n      <div id=\"placing-room-container\">\n        <TextInput id=\"placing-room-location-search\" placeholder=\"Search for a location.\" value={searchQuery} onChange={(e)=>this.setState({searchQuery: e.target.value})}/>\n        <Button svgIcon={<SearchIcon color={\"#707070\"}/>} loading={loading} id=\"placing-room-location-search-button\" onClick={(auth, query)=>this.SendSearchQuery()}/>\n        <p id=\"placing-room-text\">Drag to place your room.</p>\n        <Button svgIcon={<BackIcon color={\"#707070\"}/>} id=\"placing-room-back-button\" onClick={Close} />\n        <Button id=\"placing-room-button\" primary svgIcon={<CheckIcon color={\"white\"}/>} loading={loading} value=\"Place\" onClick={this.CreateRoom} />\n        <CrossHair />\n      </div>\n    )\n  }\n}\n\nexport default CreateRoom\n","import React from 'react'\n\nimport './Error.css'\n\nconst Error = ({error, level, show}) => (\n  <div className={`Error ${show && \"show\" } level-${level}`}>\n    <p>\n      {\n        typeof error === 'string' || error instanceof String ? (\n          error.length > 36 ? error.substr(0, 36)+'...' : error\n        ):(\n          error === undefined ? 'Error' : error.toString().substr(0, 36)\n        )\n      }\n    </p>\n  </div>\n)\n\nexport default Error\n","//take the array of data and filter it down to only entries that contain\n//the search string in the title or creators name.\nexport default function FilterRooms(search, data){\n  search = search.toLowerCase()\n  let ret = search !== '' ? (\n    data.filter(\n    room => (\n      room.name.toLowerCase().includes(search)\n      ||room.creator.name.toLowerCase().includes(search)\n    ))\n  ):(\n    data\n  )\n\n  //if no results came through, return null.\n  return ret.length > 0 ? ret : null\n}\n","export function iRandom(max){\n  return Math.round(Math.random()*max)\n}\n\nexport function iRandomRange(min, max){\n  return Math.round(Math.random()*max)+min\n}\n\nexport function randomInArray(array){\n  return array[Math.ceil(Math.random()*array.length-1)]\n}\n\nexport function GenerateRandomColor(originalIndex, excludedColor){\n  let colors = ['red', 'green', 'pink', 'yellow']\n  colors = colors.filter(color => color!==excludedColor)\n\n  if(originalIndex!==undefined){\n    let sequencedIndex = originalIndex > colors.length-1 ? (originalIndex % colors.length) : originalIndex\n    return colors[sequencedIndex]\n  }\n  return randomInArray(colors)\n}\n\n\nexport function CalcDistance(lat1, lon1, lat2, lon2) {\n\t// let R = 6371\n  let p = 0.017453292519943295    // Math.PI / 180\n  let c = Math.cos\n  let a = 0.5 - c((lat2 - lat1) * p)/2 +\n          c(lat1 * p) * c(lat2 * p) *\n          (1 - c((lon2 - lon1) * p))/2\n\n  let km = 12742 * Math.asin(Math.sqrt(a)) // 2 * R; R = 6371 km\n\treturn km/1.609\n}\n\n/**\n * Returns a percentage value between a min and max value, adjusted by a speed percentage.\n * @param       {[Number]} min   [lowest value that can go.]\n * @param       {[Number]} max   [highest value can go.]\n * @param       {[Number]} val   [value to interpolate]\n * @param       {[Number]} speed [speed modifer 0 - 1]\n * @constructor\n */\nexport function Tween(min, max, val, speed){\n  return val/(max-min)*(max*speed)\n}\n","import {CalcDistance} from '../../../functions/helpers'\nimport FilterRooms from './FilterRooms'\n\nexport default function HandleNewRooms(newRooms){\n  //extract the neccesary data from state.\n  let {rooms, searchString, userPosition, lastSearchedLocation} = this.state\n\n  //If there are new rooms in the download,\n  if(newRooms.length > 0){\n\n    //as long as the user has agreed to location tracking, and we have their coordinates...\n    userPosition && newRooms.forEach(room => {\n      //give all of the new rooms a distance from the user.\n      room.distance = CalcDistance(userPosition.latitude, userPosition.longitude, room.location[1], room.location[0])\n    })\n\n    //add the new rooms to the list.\n    rooms.push(...newRooms)\n\n    //sort each room by the distance from view.\n    SortRooms(rooms, lastSearchedLocation)\n\n    //the max length of the rooms collection is 30.\n    rooms = rooms.length > 30 ? rooms.slice(30) : rooms\n\n  }else{\n      //if there are no rooms then we just want to reorganize\n      SortRooms(rooms, lastSearchedLocation)\n  }\n\n  //select the new closest room but dont pan.\n  if(rooms.length > 0) this.SelectRoom(rooms[0]._id, {dontPan: true})\n\n  //Finally we want to restructure our list of rooms filtered through the users search string.\n  let filteredRooms = searchString !== \"\" ? FilterRooms(searchString, rooms) : rooms\n\n  //set the state with our new data.\n  this.setState({rooms, filteredRooms, lastDownloadTime: Date.now()})\n}\n\n//Take the last searched location and sort each room (asc) by its distance from that point.\nfunction SortRooms(rooms, lastSearchedLocation){\n  rooms.sort((room, other) => {\n    let distFromView = CalcDistance(lastSearchedLocation.latitude, lastSearchedLocation.longitude, room.location[1], room.location[0])\n    let otherDistFromView = CalcDistance(lastSearchedLocation.latitude, lastSearchedLocation.longitude, other.location[1], other.location[0])\n\n    return distFromView - otherDistFromView\n  })\n}\n","export default function HandleNewMessage(newMessageData){\n  //get all of the room collections from state.\n  let {rooms, pinnedRooms, createdRooms} = this.state\n\n  //extract all of the data from the new message.\n  let {message, members, membersCount} = newMessageData\n\n  //Search the normal room collection to see if it is in there.\n  let room = rooms.find(room => room._id === message.room)\n  if(room) AdjustRoom(room, message, members, membersCount)\n\n  //Search the pinned room collection to see if it is in there.\n  //But only change the room if it was not in the original collection.\n  let pinnedRoom = pinnedRooms.find(room => room._id === message.room)\n  if(!room && pinnedRoom) AdjustRoom(pinnedRoom, message, members, membersCount)\n\n  //Search the created room collection to see if it is in there.\n  //But only change the room if it was not in the original collection.\n  let createdRoom = createdRooms.find(room => room._id === message.room)\n  if(!room && createdRoom) AdjustRoom(createdRoom, message, members, membersCount)\n\n  //then set the new data.\n  this.setState({rooms, pinnedRooms, createdRooms})\n}\n\nfunction AdjustRoom(room, message, members, membersCount){\n  //add message to the begining of the rooms message array.\n  room.messages.unshift(message)\n\n  //then set the new members count and members display variables for the room.\n  room.membersCount = membersCount\n  room.members = members\n}\n","import API from '../../../functions/api'\nimport HandleNewRooms from './HandleNewRooms'\nimport HandleNewMessage from './HandleNewMessage'\n\n//This function aquires a socket from the server and then opens up listeners for it.\nexport default function HandleSocket(){\n  //Connect socket and return it.\n  return API.ConnectSocket(this.props.user)\n  //Then we set up all of the socket listeners for the app.\n  .then(socket => {\n\n    //When the server is sending new rooms we need to\n    //format them for display on the client, and add them to the proper lists.\n    socket.on('SERVER_SENDING_ROOM_DATA', (newRooms) => {\n      HandleNewRooms.call(this, newRooms)\n    })\n\n    //When we first log in, we will request all rooms created by this user.\n    socket.on('SERVER_SENDING_CREATED_ROOMS', (createdRooms) => {\n      this.setState({createdRooms})\n    })\n\n    //When we first log in, we will request all rooms pinned by this user.\n    socket.on('SERVER_SENDING_PINNED_ROOMS', (pinnedRooms) => {\n      this.setState({pinnedRooms})\n    })\n\n\n    //when a new room is created, we add it to our created rooms and afterwards we open it.\n    socket.on('ROOM_CREATED', (newRoom) => {\n      let {createdRooms} = this.state\n\n      //set the new room as owned by user, then add it to created rooms.\n      newRoom.ownedByUser = true\n      createdRooms.push(newRoom)\n      //also set the new search location to the rooms coordinates so that we sort the rooms by distance correctly.\n      this.setState({createdRooms, lastSearchedLocation: {latitude: newRoom.location[1], longitude: newRoom.location[0]}})\n\n      //after weve added it to the created room list,\n      //we should add it to the normal room queue as the map is\n      //focused on this point.\n      HandleNewRooms.call(this, [newRoom])\n\n      //select and open this new room.\n      this.OpenRoom(newRoom)\n    })\n\n    //tbd...\n    socket.on('ROOM_DELETED', roomID => {\n      let {rooms, filteredRooms, createdRooms, pinnedRooms, openedRoom} = this.state\n\n      //if this room is currently open, close it.\n      if(openedRoom && openedRoom._id === roomID){\n        this.HandleError(\"Room closed by owner.\", 0)\n        openedRoom = null\n      }\n\n      //filter out any instances of the deleted room from all room collections.\n      rooms = rooms.filter(room => room._id !== roomID)\n      filteredRooms = filteredRooms.filter(room => room._id !== roomID)\n      createdRooms = createdRooms.filter(room => room._id !== roomID)\n      pinnedRooms = pinnedRooms.filter(room => room._id !== roomID)\n\n      this.setState({rooms, filteredRooms, createdRooms, pinnedRooms, openedRoom})\n    })\n\n    //when a new message comes in,\n    socket.on('NEW_MESSAGE', newMessageData => {\n      //Add it to the proper room collections\n      HandleNewMessage.call(this, newMessageData)\n    })\n\n    return socket\n  })\n}\n","//Check if this device can get location information\n//and if the user is okay with this.\nexport async function StartTrackingLocation(){\n  //Request the initial location...\n  let userPosition = await GetInitialLocation.call(this)\n  //if getting the location was a success, we will return it\n  //and begin watching location over time.\n  .then(pos => {\n    WatchLocation.bind(this)\n    return pos\n  })\n  //If we were unable to get device location, we will return a default set of coordinates\n  //located in central austin.\n  .catch(err => ({latitude: 30.2671537, longitude: -97.743057}))\n\n\n  return userPosition\n}\n\n\n//Function to check if device can get location info, and return the location if so.\nfunction GetInitialLocation(){\n  return new Promise((resolve, reject) => {\n\n    //if there is no navigation ability in the browser error out.\n    if(!navigator || !navigator.geolocation){\n      this.HandleError(\"Unable to get location.\", 1)\n      return reject()\n    }\n\n    //if device is able to get location, we setup success and failure handlers\n    //and attempt to get the current position, then passing it on or erroring out.\n    const onPositionSuccess = (position) => {\n      resolve(handleLocation.call(this, position.coords))\n    }\n\n    const onPositionFailure = (err) => {\n      reject(handleLocationError.call(this, err))\n    }\n\n    navigator.geolocation.getCurrentPosition(onPositionSuccess, onPositionFailure)\n  })\n}\n\n//Watches the current location and passes it on or errors out.\nfunction WatchLocation(){\n  return new Promise((resolve, reject) => {\n\n    //Setup success and failure handlers,\n    //and watch the current position,\n    //passing it on or erroring out.\n    const onPositionSuccess = (position) => {\n      resolve(handleLocation.call(this, position.coords))\n    }\n\n    const onPositionFailure = (err) => {\n      reject(handleLocationError.call(this, err))\n    }\n\n    navigator.geolocation.watchPosition(onPositionSuccess,onPositionFailure)\n  })\n}\n\n//When location data is found, we extract the coordinates, set them to the state and return them\nfunction handleLocation(userPosition) {\n  userPosition = {latitude: userPosition.latitude, longitude: userPosition.longitude}\n  this.setState({userPosition})\n  return userPosition\n}\n\n//When an error occurs trying to get locatino data, we extract the error code and error\n//out a message.\nfunction handleLocationError(error) {\n  switch (error.code) {\n    case 3: this.HandleError(\"Location timed out.\", 1); break\n    case 2: this.HandleError(\"Device can't get data.\", 1); break\n    case 1: this.HandleError(\"Location services denied.\", 1); break\n    default: this.HandleError(\"Unable to get location.\", 1)\n  }\n  return null\n}\n","//import react components as needed.\nimport React, { Component } from 'react'\n//import styles for home container.\nimport './Home.css'\n\n//import all of the main app components,\nimport HomeUI from './HomeUI/HomeUI'                                      //home button and menu.\nimport Map from './Map/Map'                                               //Map display.\nimport ChatsList from './chat/ChatsList/ChatsList'                        //List of chatrooms to select from on the bottom.\nimport Chatroom from './chat/Chatroom/Chatroom'                           //A full chatroom component.\nimport CreateRoom from './CreateRoom/CreateRoom'    //A control scheme for creating a room.\n\n//import small global components for basic home functionality,\nimport Error from '../../components/display/Error/Error'                  //Error display.\nimport ReactLoading from 'react-loading'                                  //Loading spinner.\n\n//import all neccesary functions and classes,\nimport API from '../../functions/api'                                     //API class for communication with the server.\nimport FilterRooms from './functions/FilterRooms'                         //Filter rooms based on a search filter.\nimport HandleSocket from './functions/HandleSocket'   //Handle any data coming in from sockets.\nimport {StartTrackingLocation} from './functions/ProcessLocation'//Handle location data.\n\nclass Home extends Component {\n  state={\n    userPosition: null,\n    moveCoordinates: null,\n    dataReady: false,\n    menuOpen: false,\n    rooms: [],\n    newRooms: false,\n    filteredRooms: [],\n    createdRooms: [],\n    pinnedRooms: [],\n    messages: [],\n    lastDownloadTime: null,\n    selectedRoomIndex: 0,\n    selectedRoom: null,\n    openedRoom: null,\n    searchString: \"\",\n    chatValue: \"\",\n    error: \"\",\n    errorLevel: 0,\n    errorShowing: false,\n    socket: null,\n    placingRoom: false,\n    newRoomName: \"\",\n    windowWidth: window.innerWidth\n  }\n\n  //when the component is mounted we begin by getting all of the data and connections\n  //in that we need in place.\n  componentDidMount(){\n    //ad a listener to capture window width for certain UI elements.\n    window.addEventListener('resize', this.ResizeHandler)\n\n    this.InitiateApp()\n  }\n\n  //clena up listeners on unmount\n  componentWillUnmount(){window.removeEventListener('resize', this.ResizeHandler)}\n\n\n  InitiateApp = async () => {\n    //get the location of this device, and begin tracking it.\n    let location = await StartTrackingLocation.call(this)\n\n    //Make sure the map moves to this new position if it isnt already there.\n    this.MoveMap(location)\n\n\n    //gets a socket from the server, then sets up listeners for all socket events.\n    let socket = await HandleSocket.call(this)\n\n\n    //Set the socket object to state for later requests\n    this.setState({socket})\n\n\n    //download all subscribed rooms and created rooms.\n    await this.GetUserSpecificRooms(socket, this.props.user._id)\n\n\n    //take location data and socket, then make a request for roomdata from the server.\n    await this.SearchForNewRooms(socket, location, 12)\n\n\n    //all of the neccesary pieces of data are in place,\n    //we are safe to load the map and place points on it now.\n    this.onDataReady()\n\n  }\n\n\n  //Download all of the rooms this user has created and subscribed to.\n  GetUserSpecificRooms = async (socket, userID) => {\n    socket.emit(\"CLIENT_REQUESTING_CREATED\", userID)\n    socket.emit(\"CLIENT_REQUESTING_SUBSCRIPTIONS\", userID)\n  }\n\n\n  //Make a socket request to the server for room data near a specific\n  //coordinate, and for any rooms we created or subscribed to.\n  SearchForNewRooms = async (socket, pos, zoom) => {\n\n    //note down the last location that weve searched from.\n    this.setState({lastSearchedLocation: pos})\n\n    await API.RequestRooms(\n      socket,                                     //socket connection to the server\n      this.props.user._id,                        //our ID so the server knows to also grab our created and subscribed rooms.\n      pos,                                        //the position to search near.\n      zoom,                                       //our maps zoom level, to determine how wide a net to search from the given location.\n      this.state.rooms.map(chat => chat._id),     //a list of ID's signifying all of the rooms we already have downloaded, so we can reduce the download.\n      this.state.lastDownloadTime                 //The datetime of the last time we downloaded room data(so we can get new messages from after then.)\n    )\n    //Catch any errors and display them on screen.\n    .catch(err => this.HandleError(err.message, 2))\n\n    //once the new data comes in, it will be handled by our socket listeners in HandleSocket.js\n  }\n\n\n  //Capture window width on resize.\n  ResizeHandler = (e) => {this.setState({windowWidth: window.innerWidth})}\n\n\n  //function to let the rest of the app know when all of our data is ready.\n  onMapReady = () => this.setState({mapReady: true})\n\n  //function to let the rest of the app know when the map has loaded.\n  onDataReady = () => this.setState({dataReady: true})\n\n  //Function to set new map coordinates.\n  MoveMap = (moveCoordinates) => this.setState({moveCoordinates})\n\n  //Set auth to null and take the user back to the login screen.\n  Logout = () => {this.props.SetAuth(null)}\n\n  //Toggle the main menu open or closed.\n  ToggleMainMenu = (onOff) => this.setState({menuOpen: onOff})\n\n  //Set the input in the chatroom textbox.\n  SetChatValue = (val)=>this.setState({chatValue: val})\n\n  //Initiate the UI for placing a new room on the map.\n  BeginPlacingRoom = (roomName)=>{this.setState({placingRoom: true, newRoomName: roomName, menuOpen: false})}\n\n  //Cancel room placement and reset new room name to empty.\n  CancelPlacingRoom = () => this.setState({placingRoom: false, newRoomName: \"\"})\n\n  //Returns the component storing the UI for creating a room,\n  //this component needs data from inside the map component and\n  //the home component.\n  CreateRoomUI = (coords) => (\n    <CreateRoom\n      auth={this.props.auth}\n      userID={this.props.user._id}\n      socket={this.state.socket}\n      coords={coords}\n      roomTitle={this.state.newRoomName}\n      MoveMap={this.MoveMap}\n      HandleError={this.HandleError}\n      Close={this.CancelPlacingRoom}\n    />\n  )\n\n\n  //Function to select a room from the dataset.\n  SelectRoom = (selectedRoom, options) => {\n\n    let {rooms, moveCoordinates} = this.state\n\n    let selectedRoomIndex = 0\n\n    //go through each room in the dataset...\n    rooms.forEach((room, i) => {\n      //if a room matches our selected room,\n      if(room._id === selectedRoom){\n        //mark the room as selected, note down the index of this room,\n        //and if we should pan the map, set the map move coordinates\n        //to the location of this room.\n        room.selected = true\n        selectedRoomIndex = i\n        if(!options || options.dontPan !== true) moveCoordinates = {latitude: room.location[1], longitude: room.location[0]}\n      }else{\n        //if the room does not match, ensure its not selected.\n        room.selected = false\n      }\n    })\n\n    //Set the new state with the selected room, its index, and the new map coordinates.\n    this.setState({selectedRoom, selectedRoomIndex, moveCoordinates})\n  }\n\n\n\n\n  //Set the desired room as open, (placing it in the Chatroom component) and make sure\n  //the menu is closed.\n  OpenRoom = (room) => {this.setState({openedRoom: room, menuOpen: false})}\n\n  //Close the current chatroom, and clear the chat input.\n  CloseRoom = () => this.setState({openedRoom: null, chatValue: \"\"})\n\n\n\n  //Filter rooms via a search string, erroring out if no results are found.\n  FilterRooms = (val) => {\n    let filteredRooms = FilterRooms(val, this.state.rooms)\n    this.setState({filteredRooms})\n\n    if(filteredRooms === null) this.HandleError(\"no results\", 0)\n  }\n\n\n\n\n  //Pin or unpin a room for the user, adding/removing it from the pinned list on the client and\n  //sending a socket request to do the same on the server.\n  PinRoom = (roomID) => {\n    let {rooms, pinnedRooms, socket} = this.state\n\n    //map through all rooms,\n    rooms.map(room => {\n      //when the room being pinned/unpinned is found,\n      if(room._id === roomID) {\n        //toggle the pin state.\n        room.pinned = !room.pinned\n\n        //send a request to the server to pin/unpin, dont need a response as we will modify the state\n        //on our end.\n        socket.emit('CLIENT_PINNING_ROOM', this.props.user._id, room._id, room.pinned)\n\n        //push the pinned room or splice it out of the pinnedRooms array.\n        if(room.pinned)\n          pinnedRooms.push(room)\n        else\n          pinnedRooms.splice(pinnedRooms.findIndex(subbedRoom => subbedRoom._id === room._id), 1)\n      }\n      return room\n    })\n    this.setState({rooms, pinnedRooms})\n  }\n\n\n\n  //Delete room function for deleting a room created by the user.\n  DeleteRoom = (roomID) => {\n    this.state.socket.emit(\"CLIENT_DELETING_ROOM\", this.props.auth, roomID)\n  }\n\n\n\n\n  //Set the error string, and level, then begin the shake animation and a timer to stop it.\n  HandleError = (errorString, errorLevel) => {\n    console.error(\"error\", errorString)\n    this.setState({error: errorString, errorShowing: true, errorLevel})\n\n    //begin shake animation timer.\n    window.clearTimeout(this.errorFadeTimer)\n    this.errorFadeTimer = window.setTimeout(()=>this.setState({errorShowing: false}), 1500)\n\n    //return false incase we want to block form processing.\n    return false\n  }\n\n\n  render() {\n    let {user, auth} = this.props\n    let {\n          userPosition, menuOpen, filteredRooms,\n          selectedRoomIndex, openedRoom, chatValue, placingRoom,\n          error, errorLevel, errorShowing, dataReady, socket, moveCoordinates,\n          pinnedRooms, createdRooms, mapReady, windowWidth\n        } = this.state\n\n    return (\n      <div id=\"home\">\n\n        {/* Display errors */}\n        <Error error={error} level={errorLevel} show={errorShowing} />\n\n        {/* if data or map are not ready, show a loading spinner */}\n        <div className=\"loading-container\">\n          <ReactLoading type=\"spin\" color=\"#fff\" />\n        </div>\n\n        {/*\n          HomeUI component controls the main menu of the app, which includes forms for:\n          creating rooms, managing created rooms and pinned rooms,\n          searching for geo locations or filtering rooms, and changing user profile data.\n        */}\n        <HomeUI\n          //component specific data / methods.\n          open={menuOpen} //whether the menu is open or closed.\n          hide={placingRoom || openedRoom!==null || !dataReady || !mapReady} //whether or not to hide the menu.\n          SetMenuOpen={this.ToggleMainMenu} //set the menu open or closed.\n          windowWidth={windowWidth}\n\n          //authentication and profile data.\n          auth={auth} //global auth token for sending a receiving secure requests to the server.\n          user={user} //global user object for reading all things pertaining to the user.\n\n          //authentication and profile methods.\n          SetAuth={this.props.SetAuth}  //Global function passed down from root to change auth and/or profile.\n          Logout={this.Logout} //Sets auth to null, kicking the user to the main menu.\n\n          //room data\n          pinnedRooms={pinnedRooms} //a list of all rooms the user has pinned.\n          createdRooms={createdRooms} // a list of all rooms the user has created.\n\n          //room methods.\n          BeginPlacingRoom={this.BeginPlacingRoom} //Initiate UI to place a new room\n          FilterRooms={this.FilterRooms} //Filter rooms and set the new filtered room state\n          OpenRoom={this.OpenRoom} //open a room\n          PinRoom={this.PinRoom} //pin or unpin a room\n          DeleteRoom={this.DeleteRoom} //delete a room\n\n          //Map methods.\n          MoveMap={this.MoveMap}  //move the map to new coordinates\n\n          //error handling.\n          HandleError={this.HandleError}\n        />\n\n        <ChatsList\n          //component specific data / methods\n\n          //hide this component if:\n          //there is no data for it to show, we are placing a new room,\n          //the main menu is open, data is not ready, the map is not ready,\n          //or a room is open in the Chatroom component.\n          hide={!filteredRooms || placingRoom || menuOpen|| !dataReady || !mapReady || openedRoom !== null}\n          windowWidth={windowWidth}\n\n          //user data\n          userID={user._id} //the id of the current user, used to determine which rooms are owned by the current user.\n\n          //room data.\n          filteredRooms={filteredRooms} //list of rooms, filtered through a room search.\n          selectedRoomIndex={selectedRoomIndex} //the array index of the currently selected room, used to move the list scrollbar to the correct position.\n\n          //room methods.\n          SelectRoom={this.SelectRoom} // Method to select a room for viewing.\n          OpenRoom={this.OpenRoom} // Method to open a room in the Chatroom compnent.\n          PinRoom={this.PinRoom} //Method to pin/unpin a room.\n        />\n\n        <Chatroom\n          //component specific data.\n          chatroom={openedRoom} //the current chatroom that is open or null\n          value={chatValue} //the value of the users input for typing into chat.\n\n          //component specific methods.\n          SetValue={this.SetChatValue} //Method to set the chat input value\n          CloseRoom={this.CloseRoom}\n\n          //user data.\n          user={user} //the current user, used to label messages sent by the user. and for sending to the server.\n\n          //communication data.\n          socket={socket} //the socket object for communication with the server.\n\n          //Room Methods\n          PinRoom={this.PinRoom} //Method to pin/unpin a room.\n        />\n\n        {/* wait to load the map component until after all data is ready for it. */}\n        {dataReady && (\n          <Map\n            //component specific data\n            hide={openedRoom !== null || menuOpen} //hide when a chatroom is open, or when the main menu is open\n\n            //component specific methods\n            onMapReady={this.onMapReady} //listener to fire when the map is ready.\n\n            //communication specific data\n            socket={socket}\n\n            //map data\n            moveCoordinates={moveCoordinates} //a set of coordinates that when changed, prompts the map to move.\n            userPosition={userPosition} //the current world coordinates of this device.\n\n            //room data\n            filteredRooms={filteredRooms} //list of rooms filtered by a search string.\n            placingRoom={placingRoom} //a boolean that tells the map whether or not a new room is being placed.\n\n            //room methods\n            SelectRoom={this.SelectRoom} //Select room from dataset.\n            OpenRoom={this.OpenRoom} //Open a room in the chatroom\n            SearchForNewRooms={this.SearchForNewRooms} //ask the server for rooms near a certain world position.\n            CreateRoomUI={this.CreateRoomUI}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Home\n","//refer to Auth.js for context on what this component does.\n\nimport React from 'react'\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\nimport GoogleLogin from 'react-google-login'\n\nimport TextInput from '../../components/inputs/TextInput/TextInput'\nimport Button from '../../components/inputs/Button/Button'\n\nconst Login = ({\n  email, password, ChangeField, HandleLogin,\n  HandleFacebookLogin, HandleGoogleLogin,\n  HandleError, ChangePage, loginLoading,\n  fbLoginLoading, gLoginLoading, HandleFacebookClick,\n  HandleGoogleClick\n}) => {\n  return (\n    <div className=\"login-container\">\n      <div className=\"inner-container\">\n        <TextInput value={email} placeholder=\"Email\" onChange={(e)=>ChangeField(e.target.value, \"email\")}/>\n        <TextInput value={password} type=\"password\" placeholder=\"Password\" onChange={(e)=>ChangeField(e.target.value, \"password\")}/>\n\n        <Button value=\"Log In\" primary loading={loginLoading} onClick={HandleLogin} />\n\n        <FacebookLogin\n          appId={process.env.REACT_APP_FBAPPID}\n          fields=\"name,email,picture.type(large)\"\n          callback={(data)=> HandleFacebookLogin(data)}\n          onClick={HandleFacebookClick}\n          render={renderProps => (\n            <Button value=\"Facebook Login\" primary loading={fbLoginLoading} icon=\"/facebook-icon.svg\" className=\"facebook-login-button\" onClick={renderProps.onClick} />\n          )}\n        />\n\n        <GoogleLogin\n          clientId={process.env.REACT_APP_GAPPID}\n          onSuccess={(data)=> HandleGoogleLogin(data)}\n          onFailure={(err)=> HandleError(err.error, 2)}\n          render={renderProps => (\n            <Button value=\"Google Login\" primary loading={gLoginLoading} icon=\"/google-icon.svg\" className=\"google-login-button\" onClick={(e)=>{HandleGoogleClick(); renderProps.onClick(e)}} />\n          )}\n        />\n\n        <Button className=\"signup-toggle\" value=\"Signup\" noBack onClick={()=>ChangePage(\"signup\")}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Login\n","import React from 'react'\n\n//refer to Auth.js for documentation on what this component does.\n\nimport TextInput from '../../components/inputs/TextInput/TextInput'\nimport Button from '../../components/inputs/Button/Button'\n\nconst Signup = ({email, password, passwordConfirm, HandleSignup, ChangeField, ChangePage, loading, success}) => (\n  <div className=\"signup-container\">\n    <div className=\"inner-container\">\n      <TextInput value={email} placeholder=\"Email\" onChange={(e)=>ChangeField(e.target.value, \"email\")}/>\n      <TextInput value={password} type=\"password\" placeholder=\"Password\" onChange={(e)=>ChangeField(e.target.value, \"password\")}/>\n      <TextInput value={passwordConfirm} type=\"password\" placeholder=\"Password Confirm\" onChange={(e)=>ChangeField(e.target.value, \"passwordConfirm\")}/>\n      <Button value=\"Sign Up\" primary onClick={HandleSignup} loading={loading} success={success} />\n      <Button className=\"login-toggle\" value=\"Log In\" noBack onClick={()=>ChangePage(\"login\")}/>\n    </div>\n  </div>\n)\n\nexport default Signup\n","import React from 'react'\n\n//refer to Auth.js for documentation on what this component does.\n\nimport ImageUpload from '../../components/inputs/ImageUpload/ImageUpload'\nimport TextInput from '../../components/inputs/TextInput/TextInput'\nimport Button from '../../components/inputs/Button/Button'\n\nconst Profile = ({auth, image, SetImage, firstName, lastName, ChangeField, HandleProfileSubmit, HandleError, loading, success}) => {\n  return(\n    <div className=\"profile-container\">\n      <div className=\"inner-container\">\n        <ImageUpload auth={auth} image={image} endpoint='/user-image-upload' onSuccess={(data)=>SetImage(data.url)} onError={(err)=>HandleError(err)}/>\n\n        <TextInput value={firstName} placeholder=\"First Name\" onChange={(e)=>ChangeField(e.target.value, \"firstName\")}/>\n        <TextInput value={lastName} placeholder=\"Last Name\" onChange={(e)=>ChangeField(e.target.value, \"lastName\")}/>\n        <Button value=\"Create Profile\" primary onClick={HandleProfileSubmit} loading={loading} success={success} />\n      </div>\n    </div>\n  )\n}\n\nexport default Profile\n","import React from 'react'\nimport {Tween} from '../../functions/helpers'\n\nconst CityBackgroundDisplay = ({parallaxX}) => {\n  return (\n    <div className=\"city-background-display\">\n      <div className=\"sun\"></div>\n      {/*\n        Tweens city backgrounds along the X axis ensuring that they dont go beyond their bounds.\n        Tweens at different speeds to get a parallax effect.\n       */}\n      <img src=\"/city-2.svg\" alt=\"\" className=\"city city-2\" style={{transform: `translateX(-${Tween(0, 960, parallaxX, 0.1)}px)`}} />\n      <img src=\"/city-1.svg\" alt=\"\" className=\"city city-1\" style={{transform: `translateX(-${Tween(0, 960, parallaxX, 0.25)}px)`}} />\n      <img src=\"/city-0.svg\" alt=\"\" className=\"city city-0\" style={{transform: `translateX(-${Tween(0, 960, parallaxX, 0.5)}px)`}} />\n    </div>\n  )\n}\n\nexport default CityBackgroundDisplay\n","import React, { Component } from 'react'\n\n// Load Styles for the Auth page.\nimport './Auth.css'\n\n//Error display component.\nimport Error from '../../components/display/Error/Error'\n\n//Form components.\nimport Login from './Login'\nimport Signup from './Signup'\nimport ProfileSetup from './ProfileSetup'\n\n//Decorative component.\nimport CityBackgroundDisplay from './CityBackgroundDisplay'\n\n//import the API controller to get functions for authorizing against the api.\nimport API from '../../functions/api'\n\nclass Auth extends Component {\n  state = {\n    page: \"login\", // Page switches between login, signup and profile, for each stage of profile setup and auth.\n    email: \"\", // Holds input for email fields.\n    password: \"\", // Holds input for password fields.\n    passwordConfirm: \"\", // Holds input for the password confirm field.\n    firstName: \"\", // Holds input for the first name field.\n    lastName: \"\", // Holds input for the last name field.\n    image: \"\", // Holds URL of profile image once set.\n    error: \"\", // Error string to be displayed.\n    errorShowing: false, //whether the error should display or not.\n    errorLevel: 0, //The intensity of the error, 0 for message, 1 for warning, 2 for error.\n    formTarget: \"\", //Target for success and loading states on the form\n    formLoading: false, //whether or not to show a loading state on target form button\n  }\n\n  //Validates login form, and sends a login request to the server,\n  //processes the response and either sets the auth key and profile or displays an error.\n  HandleLogin = () => {\n    if(this.ValidateForm()){\n      this.SetLoading(true, \"login\")\n      //SendPost returns a promise so we can manipulate the response.\n      API.SendPost('login', {email: this.state.email, password: this.state.password})\n      .then((res)=> {\n        this.props.SetAuth(res.token, res.user)\n      })\n      .catch(error => this.SetError(error.message, 2))\n    }\n  }\n\n  HandleFacebookLogin = (data) => {\n    if(!data || !data.accessToken) return this.SetError('Facebook authentication denied', 1)\n    let filteredData = {accessToken: data.accessToken, userID: data.userID, email: data.email, name: data.name, imageURL: data.picture.data.url}\n\n    API.SendPost('fb-login', filteredData)\n    .then((res) => {\n      this.props.SetAuth(res.token, res.user)\n    })\n    .catch(error => this.SetError(error.message, 2))\n  }\n\n  HandleGoogleLogin = (data) => {\n    if(!data.tokenId) return this.SetError('Google authentication denied', 1)\n\n    let filteredData = {accessToken: data.tokenId, userID: data.googleId, email: data.profileObj.email, name: data.profileObj.name, imageURL: data.profileObj.imageUrl}\n    API.SendPost('google-login', filteredData)\n    .then((res) => {\n      this.props.SetAuth(res.token, res.user)\n    })\n    .catch(error => {\n      console.error(error)\n      this.SetError(error.message, 1)}\n    )\n  }\n\n  //Validates signup form, and sends a signup request to the server,\n  //processes the response and either sets the auth key and profile or displays an error.\n  HandleSignup = () => {\n    if(this.ValidateForm()){\n      this.SetLoading(true, \"signup\")\n\n      //SendPost returns a promise so we can manipulate the response.\n      API.SendPost('signup', {email: this.state.email, password: this.state.password})\n      .then((res)=> {\n        this.props.SetAuth(res.token, res.user)\n        this.SetLoading(false)\n        this.ChangePage('profile')\n      })\n      .catch(error => this.SetError(error.message, 2))\n    }\n  }\n\n  //Validates profile setup form, and sends a user update request to the server,\n  //processes the response and either sets the updated profile data or displays an error.\n  HandleProfileSubmit = () => {\n    if(this.ValidateForm()){\n      this.SetLoading(true, \"update-profile\")\n      //SendPost returns a promise so we can manipulate the response.\n      API.SendPost('user-update', {\n        auth: this.props.auth,\n        user:{\n          name: this.state.firstName + \" \" + this.state.lastName\n        }\n      })\n      .then((res) => {\n        this.props.SetAuth(res.auth, res.user)\n      })\n      .catch(error => this.SetError(error.toString(), 1))\n    }\n  }\n\n  //Set the error string, and level, then begin the shake animation and a timer to stop it.\n  SetError = (errorString, errorLevel) => {\n    console.error(errorString)\n    this.setState({error: errorString, errorShowing: true, errorLevel, formLoading: false})\n    window.clearTimeout(this.loadingTimer)\n\n    //begin shake animation timer.\n    window.clearTimeout(this.errorFadeTimer)\n    this.errorFadeTimer = window.setTimeout(()=>this.setState({errorShowing: false}), 1500)\n\n    //return false so that we can block form processing (check ValidateForm function).\n    return false\n  }\n\n  //Check for error cases on each page and throw errors when one is true.\n  //SetError returns false so it can block form processing.\n  ValidateForm = () => {\n    //pull out variables for easy access.\n    let {page, email, password, passwordConfirm, image, firstName, lastName} = this.state\n\n    //make sure there are no blank fields on the login page.\n    if(page === \"login\" && (email === \"\" || password === \"\")) return this.SetError(\"Fields cannot be blank\", 0)\n\n    //make sure there are no blank fields on the Signup page and that the password confirm field is the same as password.\n    //Also make sure that passwords are at least 5 characters long and contain letters and numbers.\n    if(page === \"signup\" && (email === \"\" || password === \"\" || passwordConfirm === \"\")) return this.SetError(\"Fields cannot be blank\", 0)\n    if(page === \"signup\" && email.match(/^\\S+@\\S+[.][0-9a-z]+$/) === null) return this.SetError(\"Invalid email\", 0)\n    if(page === \"signup\" && password !== passwordConfirm) return this.SetError(\"Passwords dont match\", 0)\n    if(page === \"signup\" && password.length < 4) return this.SetError(\"Password too short\", 0)\n    if(page === \"signup\" && password.match(/([0-9].*[a-zA-Z])|([a-zA-Z].*[0-9])/) === null) return this.SetError(\"Password needs letters and numbers\", 0)\n\n    //make sure there are no blank fields on the profile setup page.\n    if(page === \"profile\" && (image === \"\" || firstName === \"\" || lastName === \"\")) return this.SetError(\"Fields cannot be blank\", 0)\n    //if no errors have been found return true to confinue processing the form.\n    return true\n  }\n\n  //Change one of the input fields in the form.\n  ChangeField = (string, field) => this.setState({[field]: string})\n\n  //Switch pages between login and signup\n  ChangePage = (page) => page === \"login\" || page === \"signup\" || page === \"profile\" ? this.setState({page: page}) : this.SetError(\"Invalid Page.\", 2)\n\n  //return xpos that the outer container should translate to; 0 for login, -100% for signup, -200% for Profile\n  //this allows the ui to slide to the left and right when changing pages.\n  GetPageXPos = (page) => page === \"login\" ? 0 : page === \"signup\" ? 100 : 200\n\n  SetLoading = (formLoading, formTarget) => {\n    if(formLoading){\n      //begin loading timer.\n      window.clearTimeout(this.loadingTimer)\n      this.loadingTimer = window.setTimeout(()=>{\n        this.setState({formLoading: false})\n        this.SetError(\"Server Timed out\", 2)\n      }, 15000)\n    }else{\n      window.clearTimeout(this.loadingTimer)\n    }\n    this.setState({formLoading, formTarget})\n  }\n\n  HandleEnterPressed = (e) => {\n    if(e.key !=='Enter') return\n\n    let {page, formLoading} = this.state\n    if(!formLoading){\n      if(page === \"login\") this.HandleLogin()\n      if(page === \"signup\") this.HandleSignup()\n      if(page === \"profile\") this.HandleProfileSubmit()\n    }\n  }\n\n  componentDidMount(){window.addEventListener('keyup', this.HandleEnterPressed)}\n  componentWillUnmount(){\n    window.removeEventListener('keyup', this.HandleEnterPressed)\n    window.clearTimeout(this.errorFadeTimer)\n    window.clearTimeout(this.loadingTimer)\n  }\n\n  render() {\n    // extract variables from state and props for easy acess\n    let {page, error, errorShowing, errorLevel, email, password, passwordConfirm, firstName, lastName, image, formTarget, formLoading} = this.state\n    let {auth, user} = this.props\n\n    //default the page to profile if the name or image data is not set but everything else is.\n    if(auth && user && (!user.name || !user.image)) page = 'profile'\n\n    return (\n      <div className=\"Auth\">\n        <img className=\"logo\" src=\"/doko-logo.svg\" alt=\"logo\" />\n        <Error error={error} level={errorLevel} show={errorShowing} />\n        {/* translate the outer-container X when page changes to slide UI around. */}\n        <div className=\"outer-container\" style={{transform: `translateX(-${this.GetPageXPos(page)}vw)`}}>\n\n          {/* Handles login inputs. */}\n          <Login\n            email={email}\n            password={password}\n            ChangeField={this.ChangeField}\n            HandleLogin={this.HandleLogin}\n            HandleFacebookClick={() => {this.SetLoading(true, \"fb-login\")}}\n            HandleFacebookLogin={this.HandleFacebookLogin}\n            HandleGoogleClick={() => this.SetLoading(true, \"g-login\")}\n            HandleGoogleLogin={this.HandleGoogleLogin}\n            ChangePage={this.ChangePage}\n            HandleError={this.SetError}\n            loginLoading={formTarget === \"login\" && formLoading}\n            fbLoginLoading={formTarget === \"fb-login\" && formLoading}\n            gLoginLoading={formTarget === \"g-login\" && formLoading}\n          />\n\n          {/* Handles signup inputs. */}\n          <Signup\n            email={email}\n            password={password}\n            passwordConfirm={passwordConfirm}\n            ChangeField={this.ChangeField}\n            HandleSignup={this.HandleSignup}\n            ChangePage={this.ChangePage}\n            loading={formTarget === \"signup\" && formLoading}\n          />\n\n          {/* Handles profile image upload as well as name inputs. */}\n          <ProfileSetup\n            auth={auth}\n            image={image}\n            SetImage={(image) => this.setState({image})}\n            firstName={firstName}\n            lastName={lastName}\n            ChangeField={this.ChangeField}\n            HandleProfileSubmit={this.HandleProfileSubmit}\n            HandleError={this.SetError}\n            loading={formTarget === \"profile-update\" && formLoading}\n          />\n        </div>\n\n        {/* A display component that shows a city in the background of the auth page, using the page scroll for parallax. */}\n        <CityBackgroundDisplay parallaxX={this.GetPageXPos(page)} />\n      </div>\n    )\n  }\n\n}\nexport default Auth\n","import React, { Component } from 'react'\nimport './App.css' //Load styles global to the entire app.\n\n//load the two main pages for the app,\n//Auth blocks entry until the user has an account and is authorized,\n//Home contains all of the main functionality and components of the app.\nimport Home from './pages/Home/Home'\nimport Auth from './pages/Auth/Auth'\n\n//Load dotenv so we can load mapbox's map using our private API key.\nimport dotenv from 'dotenv'\ndotenv.config()\n\nclass App extends Component {\n\n  state = {\n    auth: null, //the users auth token, if null or expired an auth screen is shown.\n    user: null, //the users profile, if null then a profile creation page must be displayed.\n  }\n\n  componentDidMount(){\n  }\n\n  render() {\n    //populate variables from state for easy access.\n    let {auth, user} = this.state\n\n    return (\n      <div className=\"App\">\n        {/* if the auth token is not valid or user not set up, we display an auth page */}\n        {auth === null || user === null || !user.name || !user.image ? (\n          <Auth\n            auth={auth}\n            user={user}\n            SetAuth={(auth, user)=>{this.setState({auth, user})}}\n          />\n        ):(\n          // Once Auth and profile are ready, we display the normal app.\n          <Home\n            user={user}\n            auth={auth}\n            SetAuth={(auth, user)=>{this.setState({auth, user})}}\n          />\n        )}\n      </div>\n    )\n  }\n\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}